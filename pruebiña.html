<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Observatorio Inmobiliario Bogotá</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ECharts CDN -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- Font Awesome for icons (for bar chart icons if needed, though SVGs are used in JS) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      * {
        font-family: "Nunito Sans", sans-serif;
      }
      /* Custom styles to override or enhance Tailwind */
      body {
        font-family: "Nunito Sans", sans-serif;
        background-color: #f0f2f5;
        /* Light gray background, similar to the reference */
      }

      .navbar {
        background-color: #ffffff;
        /* White navbar background */
        border-bottom: 1px solid #e0e0e0;
        /* Subtle border at the bottom */
      }

      .container {
        max-width: 1280px;
        /* Max width for content */
      }

      .chart-card {
        background-color: #ffffff;
        /* White background for chart cards */
        border-radius: 0.5rem;
        /* Rounded corners */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        /* Subtle shadow */
        padding: 1.5rem;
        /* Padding inside cards */
      }

      .echart-container {
        width: 100%;
        height: 100%;
        min-height: 300px;
      }

      /* Specific height for the map chart */
      #map-grafico {
        height: 500px;
        /* Larger height for the map */
      }

      /* Responsive adjustments for select elements */
      select {
        appearance: none;
        /* Remove default arrow */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
      }
    </style>
  </head>

  <body class="bg-gray-100 text-gray-800">
    <!-- Navbar -->
    <nav class="navbar py-4 px-6 md:px-12 flex items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center">
        <img
          src="https://placehold.co/50x50/2563eb/ffffff?text=LOGO"
          alt="Logo Observatorio"
          class="h-12 w-12 rounded-full mr-3"
        />
        <span class="text-xl font-bold text-gray-900"
          >Observatorio Inmobiliario Bogotá</span
        >
      </div>
      <!-- Navigation Links -->
      <div class="hidden md:flex space-x-6">
        <a
          href="#"
          class="text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200"
          >Inicio</a
        >
        <a
          href="#"
          class="text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200"
          >Investigación</a
        >
        <a
          href="#"
          class="text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200"
          >Publicaciones</a
        >
        <a
          href="#"
          class="text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200"
          >Contacto</a
        >
      </div>
      <!-- Mobile Menu Button (Hamburger) -->
      <div class="md:hidden">
        <button
          id="mobile-menu-button"
          class="text-gray-600 focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16m-7 6h7"
            ></path>
          </svg>
        </button>
      </div>
    </nav>
    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="hidden md:hidden bg-white shadow-md py-2 px-6">
      <a
        href="#"
        class="block py-2 text-gray-600 hover:text-blue-600 font-medium"
        >Inicio</a
      >
      <a
        href="#"
        class="block py-2 text-gray-600 hover:text-blue-600 font-medium"
        >Investigación</a
      >
      <a
        href="#"
        class="block py-2 text-gray-600 hover:text-blue-600 font-medium"
        >Publicaciones</a
      >
      <a
        href="#"
        class="block py-2 text-gray-600 hover:text-blue-600 font-medium"
        >Contacto</a
      >
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
      <h1
        class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-8 text-center"
      >
        Informe de Transacciones Inmobiliarias en Bogotá
      </h1>

      <!-- Section 1: Main Line Chart (Venta Total de Inmuebles) -->
      <section class="mb-8 chart-card">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-4"
        >
          <h2 class="text-2xl font-bold text-gray-800">
            Venta Total de Inmuebles en Bogotá (Histórico)
          </h2>
          <div
            class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
          >
            <select
              id="filter-line-time"
              class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="año">Año</option>
              <option value="semestre">Semestre</option>
              <option value="trimestre">Trimestre</option>
            </select>
          </div>
        </div>
        <p class="text-gray-600 mb-4">
          Este gráfico muestra la evolución de las ventas totales de inmuebles
          en Bogotá a lo largo del tiempo, permitiendo analizar tendencias por
          semestre, trimestre o año.
        </p>
        <div id="line-chart" class="echart-container h-96"></div>
      </section>

      <!-- Section 2: Radar Charts y Pie chart -->
      <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <div class="chart-card">
          <div
            class="flex flex-col md:flex-row justify-between items-center mb-4"
          >
            <h2 class="text-2xl font-bold text-gray-800">
              Meses con Mayor Dinámica
            </h2>
            <div
              class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
            >
              <select
                id="filter-radar1-year"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2019">2019</option>
              </select>
            </div>
          </div>
          <p class="text-gray-600 mb-4">
            Este gráfico de radar compara la actividad de ventas en diferentes
            meses, destacando los periodos de mayor dinamismo en el mercado
            inmobiliario.
          </p>
          <div id="radar-chart-months" class="echart-container h-80"></div>
        </div>
        <div class="chart-card">
          <div
            class="flex flex-col md:flex-row justify-between items-center mb-4"
          >
            <h2 class="text-2xl font-bold text-gray-800">
              Inmuebles Residenciales Vendidos por Estratos
            </h2>
            <div
              class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
            >
              <select
                id="filter-pie-time"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              ></select>
              <select
                id="filter-pie-year"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2019">2019</option>
              </select>
            </div>
          </div>
          <p class="text-gray-600 mb-4">
            Muestra la distribución de ventas de inmuebles residenciales según
            el estrato socioeconómico, ofreciendo una visión de la demanda en
            cada segmento.
          </p>
          <div id="radar-chart-strata" class="echart-container h-80"></div>
        </div>
      </section>

      <!-- Section 3: Map Chart -->
      <section class="mb-8 chart-card">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-4"
        >
          <h2 class="text-2xl font-bold text-gray-800">
            Mapa Interactivo de Transacciones por Localidad en Bogotá
          </h2>
          <div
            class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
          >
            <select
              id="filter-map-time"
              class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="semestre">Semestre</option>
              <option value="trimestre">Trimestre</option>
              <option value="año">Año</option>
            </select>
            <select
              id="filter-map-year"
              class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
              <option value="2022">2022</option>
              <option value="2021">2021</option>
              <option value="2020">2020</option>
              <option value="2019">2019</option>
            </select>
          </div>
        </div>
        <p class="text-gray-600 mb-4">
          Visualización geográfica de las transacciones inmobiliarias,
          destacando las localidades con mayor actividad de ventas.
        </p>
        <div id="map-grafico" class="echart-container"></div>
      </section>

      <!-- Section 4: Bar Charts with Icons and Gauge Charts -->
      <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <div class="chart-card">
          <div
            class="flex flex-col md:flex-row justify-between items-center mb-4"
          >
            <h2 class="text-2xl font-bold text-gray-800">
              Transacciones por Tipo de Propiedad
            </h2>
            <div
              class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
            >
              <select
                id="filter-icons-time"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="año">Año</option>
                <option value="semestre">Semestre</option>
                <option value="trimestre">Trimestre</option>
              </select>
              <select
                id="filter-icons-year"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2019">2019</option>
                <option value="historico">Histórico (2019-2025)</option>
              </select>
            </div>
          </div>
          <p class="text-gray-600 mb-4">
            Este gráfico de barras desglosa las transacciones por tipo de
            propiedad (casas, apartamentos, oficinas, locales, etc.).
          </p>
          <div id="icons-chart" class="echart-container h-80"></div>
        </div>
        <div class="chart-card">
          <div
            class="flex flex-col md:flex-row justify-between items-center mb-4"
          >
            <h2 class="text-2xl font-bold text-gray-800">
              Transacciones por Condición Jurídica
            </h2>
            <div
              class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
            >
              <select
                id="filter-tort-year"
                class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2019">2019</option>
              </select>
            </div>
          </div>
          <p class="text-gray-600 mb-4">
            Compara las transacciones de inmuebles bajo régimen de propiedad
            horizontal y no horizontal.
          </p>
          <div id="tort-chart" class="echart-container h-80"></div>
        </div>
      </section>

      <!-- Section Sectores -->
      <section class="mb-8 chart-card">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-4"
        >
          <h2 class="text-2xl font-bold text-gray-800">
            Transacciones inmobiliarias por sectores
          </h2>
          <div
            class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
          >
            <select
              id="filter-main-bar1-year"
              class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="2024">2024</option>
              <option value="2025">2025</option>
            </select>
          </div>
        </div>
        <p class="text-gray-600 mb-4">
          Este gráfico de barras muestra el volumen total de transacciones
          inmobiliarias (residenciales y no residenciales combinadas).
        </p>
        <div id="totalTransacciones-chart" class="echart-container h-80"></div>
      </section>

      <!-- Section for original chart1: Transacciones por Localidad (Bar Chart) -->
      <section class="mb-8 chart-card">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-4"
        >
          <h2 class="text-2xl font-bold text-gray-800">
            Transacciones por Localidad (Bogotá)
          </h2>
          <div
            class="flex flex-wrap justify-center md:justify-end space-x-2 mt-4 md:mt-0"
          >
            <select
              id="filter-main-bar-year"
              class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
              <option value="2022">2022</option>
              <option value="2021">2021</option>
              <option value="2020">2020</option>
              <option value="2019">2019</option>
            </select>
          </div>
        </div>
        <p class="text-gray-600 mb-4">
          Este gráfico de barras muestra el número de transacciones
          inmobiliarias por localidad en Bogotá.
        </p>
        <div id="main-bar-chart" class="echart-container h-96"></div>
      </section>
    </main>

    <script>
      // Mobile menu toggle
      document
        .getElementById("mobile-menu-button")
        .addEventListener("click", function () {
          const mobileMenu = document.getElementById("mobile-menu");
          mobileMenu.classList.toggle("hidden");
        });

      // ECharts Theme Registration (essos theme as used in your original JS)
      echarts.registerTheme("essos", {
        color: [
          "#FEB400",
          "#E3192F",
          "#fcd077",
          "#d89216",
          "#9e9c9a",
          "#606060",
        ],
        backgroundColor: "rgba(255,255,255,0)", // Transparent background for charts
        textStyle: {
          fontFamily: "Nunito Sans",
        },
        title: {
          textStyle: {
            color: "#333", // Dark text for titles on white background
          },
          subtextStyle: {
            color: "#666",
          },
        },
        line: {
          itemStyle: {
            borderWidth: 1,
          },
          lineStyle: {
            width: 2,
          },
          symbolSize: 4,
          symbol: "circle",
          smooth: false,
        },
        bar: {
          itemStyle: {
            barBorderWidth: 0,
            barBorderColor: "#ccc",
          },
        },
        pie: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        scatter: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        boxplot: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        parallel: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        sankey: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        funnel: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        gauge: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
        },
        candlestick: {
          itemStyle: {
            color: "#fd1050",
            color0: "#0cf49b",
            borderColor: "#fd1050",
            borderColor0: "#0cf49b",
            borderWidth: 1,
          },
        },
        graph: {
          itemStyle: {
            borderWidth: 0,
            borderColor: "#ccc",
          },
          lineStyle: {
            width: 1,
            color: "#aaa",
          },
          symbolSize: 4,
          symbol: "circle",
          smooth: false,
          label: {
            color: "#eee",
          },
        },
        map: {
          itemStyle: {
            areaColor: "#eee",
            borderColor: "#444",
            borderWidth: 0.5,
          },
          label: {
            color: "#000",
          },
          emphasis: {
            itemStyle: {
              areaColor: "#ffdd00",
              borderColor: "#444",
              borderWidth: 1,
            },
            label: {
              color: "#000",
            },
          },
        },
        geo: {
          itemStyle: {
            areaColor: "#eee",
            borderColor: "#444",
            borderWidth: 0.5,
          },
          label: {
            color: "#000",
          },
          emphasis: {
            itemStyle: {
              areaColor: "#ffdd00",
              borderColor: "#444",
              borderWidth: 1,
            },
            label: {
              color: "#000",
            },
          },
        },
        categoryAxis: {
          axisLine: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisLabel: {
            show: true,
            color: "#333", // Dark text for labels
          },
          splitLine: {
            show: false,
            lineStyle: {
              color: ["#eee"],
            },
          },
          splitArea: {
            show: false,
            areaStyle: {
              color: ["rgba(250,250,250,0.3)", "rgba(200,200,200,0.3)"],
            },
          },
        },
        valueAxis: {
          axisLine: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisLabel: {
            show: true,
            color: "#333", // Dark text for labels
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: ["#eee"],
            },
          },
          splitArea: {
            show: false,
            areaStyle: {
              color: ["rgba(250,250,250,0.3)", "rgba(200,200,200,0.3)"],
            },
          },
        },
        logAxis: {
          axisLine: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisLabel: {
            show: true,
            color: "#333",
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: ["#eee"],
            },
          },
          splitArea: {
            show: false,
            areaStyle: {
              color: ["rgba(250,250,250,0.3)", "rgba(200,200,200,0.3)"],
            },
          },
        },
        timeAxis: {
          axisLine: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisTick: {
            show: true,
            lineStyle: {
              color: "#aaa",
            },
          },
          axisLabel: {
            show: true,
            color: "#333",
          },
          splitLine: {
            show: true,
            lineStyle: {
              color: ["#eee"],
            },
          },
          splitArea: {
            show: false,
            areaStyle: {
              color: ["rgba(250,250,250,0.3)", "rgba(200,200,200,0.3)"],
            },
          },
        },
        toolbox: {
          iconStyle: {
            borderColor: "#999",
          },
          emphasis: {
            iconStyle: {
              borderColor: "#666",
            },
          },
        },
        legend: {
          textStyle: {
            color: "#333",
          },
        },
        tooltip: {
          axisPointer: {
            lineStyle: {
              color: "#ccc",
              width: 1,
            },
            crossStyle: {
              color: "#ccc",
              width: 1,
            },
          },
          textStyle: {
            color: "#333",
          },
        },
        timeline: {
          lineStyle: {
            color: "#aaa",
            width: 1,
          },
          itemStyle: {
            color: "#aaa",
            borderWidth: 1,
          },
          controlStyle: {
            color: "#aaa",
            borderColor: "#aaa",
            borderWidth: 0.5,
          },
          checkpointStyle: {
            color: "#300000",
          },
          label: {
            color: "#aaa",
          },
          emphasis: {
            itemStyle: {
              color: "#a93344",
            },
            controlStyle: {
              color: "#a93344",
              borderColor: "#a93344",
            },
            label: {
              color: "#a93344",
            },
          },
        },
        visualMap: {
          color: ["#bf4444", "#d88273", "#f6efa6"],
        },
        dataZoom: {
          handleSize: "80%",
          handleStyle: {
            color: "#fff",
            shadowBlur: 3,
            shadowOffsetX: 2,
            shadowOffsetY: 2,
          },
          textStyle: {
            color: "#333",
          },
          borderColor: "#aaa",
        },
        markPoint: {
          label: {
            color: "#eee",
          },
          itemStyle: {
            borderColor: "#eee",
          },
        },
      });

      document.addEventListener("DOMContentLoaded", function () {
        // --- Funciones para cargar datos desde CSV (Ejemplo) ---
        // Puedes usar esta función para cargar tus datos reales desde archivos CSV.
        // Por ahora, los datos son inventados directamente en el código.
        async function loadCsvData(filePath) {
          try {
            const response = await fetch(filePath);
            const text = await response.text();
            const lines = text.split("\n").filter((line) => line.trim() !== "");
            const headers = lines[0].split(",").map((header) => header.trim());
            const data = lines.slice(1).map((line) => {
              const values = line.split(",").map((val) => val.trim());
              let row = {};
              headers.forEach((header, i) => {
                row[header] = isNaN(Number(values[i]))
                  ? values[i]
                  : Number(values[i]);
              });
              return row;
            });
            return data;
          } catch (error) {
            console.error("Error al cargar datos CSV:", error);
            return [];
          }
        }

        // --- Datos para el gráfico de líneas (Venta Total de Inmuebles) ---
        const dataLine = [
          { tipo: "anio", periodo: "2019", total: 67697 },
          { tipo: "anio", periodo: "2020", total: 67264 },
          { tipo: "anio", periodo: "2021", total: 103197 },
          { tipo: "anio", periodo: "2022", total: 103413 },
          { tipo: "anio", periodo: "2023", total: 82958 },
          { tipo: "anio", periodo: "2024", total: 90028 },
          { tipo: "anio", periodo: "2025", total: 30605 },

          { tipo: "semestre", periodo: "2019-1", total: 28952 },
          { tipo: "semestre", periodo: "2019-2", total: 38745 },
          { tipo: "semestre", periodo: "2020-1", total: 21744 },
          { tipo: "semestre", periodo: "2020-2", total: 45520 },
          { tipo: "semestre", periodo: "2021-1", total: 43876 },
          { tipo: "semestre", periodo: "2021-2", total: 59321 },
          { tipo: "semestre", periodo: "2022-1", total: 46650 },
          { tipo: "semestre", periodo: "2022-2", total: 56763 },
          { tipo: "semestre", periodo: "2023-1", total: 32523 },
          { tipo: "semestre", periodo: "2023-2", total: 50435 },
          { tipo: "semestre", periodo: "2024-1", total: 37446 },
          { tipo: "semestre", periodo: "2024-2", total: 52582 },
          { tipo: "semestre", periodo: "2025-1", total: 30602 },
          { tipo: "semestre", periodo: "2025-2", total: 3 },

          { tipo: "trimestre", periodo: "2019-1", total: 14230 },
          { tipo: "trimestre", periodo: "2019-2", total: 14722 },
          { tipo: "trimestre", periodo: "2019-3", total: 20537 },
          { tipo: "trimestre", periodo: "2019-4", total: 18208 },
          { tipo: "trimestre", periodo: "2020-1", total: 12648 },
          { tipo: "trimestre", periodo: "2020-2", total: 9096 },
          { tipo: "trimestre", periodo: "2020-3", total: 17220 },
          { tipo: "trimestre", periodo: "2020-4", total: 28300 },
          { tipo: "trimestre", periodo: "2021-1", total: 18973 },
          { tipo: "trimestre", periodo: "2021-2", total: 24903 },
          { tipo: "trimestre", periodo: "2021-3", total: 27254 },
          { tipo: "trimestre", periodo: "2021-4", total: 32067 },
          { tipo: "trimestre", periodo: "2022-1", total: 21300 },
          { tipo: "trimestre", periodo: "2022-2", total: 25350 },
          { tipo: "trimestre", periodo: "2022-3", total: 26754 },
          { tipo: "trimestre", periodo: "2022-4", total: 30009 },
          { tipo: "trimestre", periodo: "2023-1", total: 11180 },
          { tipo: "trimestre", periodo: "2023-2", total: 21343 },
          { tipo: "trimestre", periodo: "2023-3", total: 23871 },
          { tipo: "trimestre", periodo: "2023-4", total: 26564 },
          { tipo: "trimestre", periodo: "2024-1", total: 15103 },
          { tipo: "trimestre", periodo: "2024-2", total: 22343 },
          { tipo: "trimestre", periodo: "2024-3", total: 24438 },
          { tipo: "trimestre", periodo: "2024-4", total: 28144 },
          { tipo: "trimestre", periodo: "2025-1", total: 16267 },
          { tipo: "trimestre", periodo: "2025-2", total: 14335 },
        ];

        // --- Datos para el gráfico de radar (Meses con Mayor Dinámica) ---
        const datosRadar = [
          { periodo: "2019-01", valor: 762 },
          { periodo: "2019-02", valor: 3253 },
          { periodo: "2019-03", valor: 5810 },
          { periodo: "2019-04", valor: 6342 },
          { periodo: "2019-05", valor: 7 },
          { periodo: "2019-06", valor: 5660 },
          { periodo: "2019-07", valor: 8135 },
          { periodo: "2019-08", valor: 6906 },
          { periodo: "2019-09", valor: 7064 },
          { periodo: "2019-10", valor: 6790 },
          { periodo: "2019-11", valor: 6804 },
          { periodo: "2019-12", valor: 4765 },
          { periodo: "2020-01", valor: 4382 },
          { periodo: "2020-02", valor: 6586 },
          { periodo: "2020-03", valor: 3077 },
          { periodo: "2020-04", valor: 2487 },
          { periodo: "2020-05", valor: 4074 },
          { periodo: "2020-06", valor: 4116 },
          { periodo: "2020-07", valor: 5564 },
          { periodo: "2020-08", valor: 4006 },
          { periodo: "2020-09", valor: 6199 },
          { periodo: "2020-10", valor: 10132 },
          { periodo: "2020-11", valor: 7745 },
          { periodo: "2020-12", valor: 9055 },
          { periodo: "2021-01", valor: 6385 },
          { periodo: "2021-02", valor: 9340 },
          { periodo: "2021-03", valor: 8582 },
          { periodo: "2021-04", valor: 7558 },
          { periodo: "2021-05", valor: 7840 },
          { periodo: "2021-06", valor: 8460 },
          { periodo: "2021-07", valor: 8913 },
          { periodo: "2021-08", valor: 9346 },
          { periodo: "2021-09", valor: 9977 },
          { periodo: "2021-10", valor: 9680 },
          { periodo: "2021-11", valor: 8995 },
          { periodo: "2021-12", valor: 12322 },
          { periodo: "2022-01", valor: 7191 },
          { periodo: "2022-02", valor: 9996 },
          { periodo: "2022-03", valor: 10306 },
          { periodo: "2022-04", valor: 8068 },
          { periodo: "2022-05", valor: 9499 },
          { periodo: "2022-06", valor: 9068 },
          { periodo: "2022-07", valor: 8808 },
          { periodo: "2022-08", valor: 10494 },
          { periodo: "2022-09", valor: 9920 },
          { periodo: "2022-10", valor: 8773 },
          { periodo: "2022-11", valor: 8757 },
          { periodo: "2022-12", valor: 11460 },
          { periodo: "2023-01", valor: 5311 },
          { periodo: "2023-02", valor: 10424 },
          { periodo: "2023-03", valor: 1015 },
          { periodo: "2023-04", valor: 6566 },
          { periodo: "2023-05", valor: 8095 },
          { periodo: "2023-06", valor: 7547 },
          { periodo: "2023-07", valor: 7294 },
          { periodo: "2023-08", valor: 8549 },
          { periodo: "2023-09", valor: 8744 },
          { periodo: "2023-10", valor: 8550 },
          { periodo: "2023-11", valor: 8573 },
          { periodo: "2023-12", valor: 9804 },
          { periodo: "2024-01", valor: 5798 },
          { periodo: "2024-02", valor: 8717 },
          { periodo: "2024-03", valor: 5787 },
          { periodo: "2024-04", valor: 8605 },
          { periodo: "2024-05", valor: 8975 },
          { periodo: "2024-06", valor: 6706 },
          { periodo: "2024-07", valor: 9402 },
          { periodo: "2024-08", valor: 9001 },
          { periodo: "2024-09", valor: 9353 },
          { periodo: "2024-10", valor: 10462 },
          { periodo: "2024-11", valor: 9961 },
          { periodo: "2024-12", valor: 12626 },
          { periodo: "2025-01", valor: 7207 },
          { periodo: "2025-02", valor: 11736 },
          { periodo: "2025-03", valor: 10089 },
          { periodo: "2025-04", valor: 8989 },
          { periodo: "2025-05", valor: 9533 },
          { periodo: "2025-06", valor: 9350 },
        ];

        // --- Datos para el gráfico de pastel (Transacciones por Estrato) ---
        const dataPie = [
          {
            tipo: "anio",
            periodo: "2019",
            estrato1: 956,
            estrato2: 8098,
            estrato3: 15322,
            estrato4: 12967,
            estrato5: 4578,
            estrato6: 3469,
          },
          {
            tipo: "anio",
            periodo: "2020",
            estrato1: 790,
            estrato2: 6870,
            estrato3: 15093,
            estrato4: 13571,
            estrato5: 5270,
            estrato6: 4268,
          },
          {
            tipo: "anio",
            periodo: "2021",
            estrato1: 1424,
            estrato2: 11090,
            estrato3: 23145,
            estrato4: 20270,
            estrato5: 7865,
            estrato6: 6090,
          },
          {
            tipo: "anio",
            periodo: "2022",
            estrato1: 1570,
            estrato2: 11228,
            estrato3: 23337,
            estrato4: 20904,
            estrato5: 7842,
            estrato6: 6136,
          },
          {
            tipo: "anio",
            periodo: "2023",
            estrato1: 1058,
            estrato2: 8747,
            estrato3: 16562,
            estrato4: 13502,
            estrato5: 4993,
            estrato6: 3655,
          },
          {
            tipo: "anio",
            periodo: "2024",
            estrato1: 1076,
            estrato2: 9911,
            estrato3: 21107,
            estrato4: 16935,
            estrato5: 6799,
            estrato6: 5151,
          },
          {
            tipo: "anio",
            periodo: "2025",
            estrato1: 363,
            estrato2: 4585,
            estrato3: 9100,
            estrato4: 8224,
            estrato5: 3127,
            estrato6: 2624,
          },

          {
            tipo: "semestre",
            periodo: "2019-1",
            estrato1: 405,
            estrato2: 3783,
            estrato3: 6825,
            estrato4: 5616,
            estrato5: 2045,
            estrato6: 1499,
          },
          {
            tipo: "semestre",
            periodo: "2019-2",
            estrato1: 551,
            estrato2: 4315,
            estrato3: 8497,
            estrato4: 7351,
            estrato5: 2533,
            estrato6: 1970,
          },
          {
            tipo: "semestre",
            periodo: "2020-1",
            estrato1: 283,
            estrato2: 2388,
            estrato3: 5667,
            estrato4: 4469,
            estrato5: 1721,
            estrato6: 1442,
          },
          {
            tipo: "semestre",
            periodo: "2020-2",
            estrato1: 507,
            estrato2: 4482,
            estrato3: 9426,
            estrato4: 9102,
            estrato5: 3549,
            estrato6: 2826,
          },
          {
            tipo: "semestre",
            periodo: "2021-1",
            estrato1: 619,
            estrato2: 5026,
            estrato3: 10394,
            estrato4: 9092,
            estrato5: 3590,
            estrato6: 2723,
          },
          {
            tipo: "semestre",
            periodo: "2021-2",
            estrato1: 805,
            estrato2: 6064,
            estrato3: 12751,
            estrato4: 11178,
            estrato5: 4275,
            estrato6: 3367,
          },
          {
            tipo: "semestre",
            periodo: "2022-1",
            estrato1: 740,
            estrato2: 5221,
            estrato3: 11101,
            estrato4: 9730,
            estrato5: 3707,
            estrato6: 2776,
          },
          {
            tipo: "semestre",
            periodo: "2022-2",
            estrato1: 830,
            estrato2: 6007,
            estrato3: 12236,
            estrato4: 11174,
            estrato5: 4135,
            estrato6: 3360,
          },
          {
            tipo: "semestre",
            periodo: "2023-1",
            estrato1: 465,
            estrato2: 3836,
            estrato3: 7213,
            estrato4: 5587,
            estrato5: 1976,
            estrato6: 1429,
          },
          {
            tipo: "semestre",
            periodo: "2023-2",
            estrato1: 593,
            estrato2: 4911,
            estrato3: 9349,
            estrato4: 7915,
            estrato5: 3017,
            estrato6: 2226,
          },
          {
            tipo: "semestre",
            periodo: "2024-1",
            estrato1: 515,
            estrato2: 4434,
            estrato3: 9483,
            estrato4: 7293,
            estrato5: 2903,
            estrato6: 2217,
          },
          {
            tipo: "semestre",
            periodo: "2024-2",
            estrato1: 561,
            estrato2: 5477,
            estrato3: 11624,
            estrato4: 9642,
            estrato5: 3896,
            estrato6: 2934,
          },
          {
            tipo: "semestre",
            periodo: "2025-1",
            estrato1: 363,
            estrato2: 4585,
            estrato3: 9100,
            estrato4: 8221,
            estrato5: 3127,
            estrato6: 2624,
          },
          {
            tipo: "semestre",
            periodo: "2025-2",
            estrato1: 0,
            estrato2: 0,
            estrato3: 0,
            estrato4: 3,
            estrato5: 0,
            estrato6: 0,
          },

          {
            tipo: "trimestre",
            periodo: "2019-1",
            estrato1: 202,
            estrato2: 1966,
            estrato3: 3810,
            estrato4: 3056,
            estrato5: 1137,
            estrato6: 777,
          },
          {
            tipo: "trimestre",
            periodo: "2019-2",
            estrato1: 203,
            estrato2: 1817,
            estrato3: 3015,
            estrato4: 2560,
            estrato5: 908,
            estrato6: 722,
          },
          {
            tipo: "trimestre",
            periodo: "2019-3",
            estrato1: 298,
            estrato2: 2443,
            estrato3: 4406,
            estrato4: 4128,
            estrato5: 1607,
            estrato6: 1138,
          },
          {
            tipo: "trimestre",
            periodo: "2019-4",
            estrato1: 253,
            estrato2: 1872,
            estrato3: 4091,
            estrato4: 3223,
            estrato5: 926,
            estrato6: 832,
          },
          {
            tipo: "trimestre",
            periodo: "2020-1",
            estrato1: 189,
            estrato2: 1514,
            estrato3: 3567,
            estrato4: 2611,
            estrato5: 891,
            estrato6: 799,
          },
          {
            tipo: "trimestre",
            periodo: "2020-2",
            estrato1: 94,
            estrato2: 874,
            estrato3: 2100,
            estrato4: 1858,
            estrato5: 830,
            estrato6: 643,
          },
          {
            tipo: "trimestre",
            periodo: "2020-3",
            estrato1: 211,
            estrato2: 1740,
            estrato3: 3777,
            estrato4: 3624,
            estrato5: 1450,
            estrato6: 1191,
          },
          {
            tipo: "trimestre",
            periodo: "2020-4",
            estrato1: 296,
            estrato2: 2742,
            estrato3: 5649,
            estrato4: 5478,
            estrato5: 2099,
            estrato6: 1635,
          },
          {
            tipo: "trimestre",
            periodo: "2021-1",
            estrato1: 284,
            estrato2: 2345,
            estrato3: 4875,
            estrato4: 4227,
            estrato5: 1681,
            estrato6: 1230,
          },
          {
            tipo: "trimestre",
            periodo: "2021-2",
            estrato1: 335,
            estrato2: 2681,
            estrato3: 5519,
            estrato4: 4865,
            estrato5: 1909,
            estrato6: 1493,
          },
          {
            tipo: "trimestre",
            periodo: "2021-3",
            estrato1: 380,
            estrato2: 2846,
            estrato3: 5952,
            estrato4: 5279,
            estrato5: 2087,
            estrato6: 1436,
          },
          {
            tipo: "trimestre",
            periodo: "2021-4",
            estrato1: 425,
            estrato2: 3218,
            estrato3: 6799,
            estrato4: 5899,
            estrato5: 2188,
            estrato6: 1931,
          },
          {
            tipo: "trimestre",
            periodo: "2022-1",
            estrato1: 339,
            estrato2: 2398,
            estrato3: 5169,
            estrato4: 4497,
            estrato5: 1703,
            estrato6: 1332,
          },
          {
            tipo: "trimestre",
            periodo: "2022-2",
            estrato1: 401,
            estrato2: 2823,
            estrato3: 5932,
            estrato4: 5233,
            estrato5: 2004,
            estrato6: 1444,
          },
          {
            tipo: "trimestre",
            periodo: "2022-3",
            estrato1: 407,
            estrato2: 2991,
            estrato3: 6001,
            estrato4: 5422,
            estrato5: 1882,
            estrato6: 1570,
          },
          {
            tipo: "trimestre",
            periodo: "2022-4",
            estrato1: 423,
            estrato2: 3016,
            estrato3: 6235,
            estrato4: 5752,
            estrato5: 2253,
            estrato6: 1790,
          },
          {
            tipo: "trimestre",
            periodo: "2023-1",
            estrato1: 178,
            estrato2: 1460,
            estrato3: 2708,
            estrato4: 1978,
            estrato5: 680,
            estrato6: 529,
          },
          {
            tipo: "trimestre",
            periodo: "2023-2",
            estrato1: 287,
            estrato2: 2376,
            estrato3: 4505,
            estrato4: 3609,
            estrato5: 1296,
            estrato6: 900,
          },
          {
            tipo: "trimestre",
            periodo: "2023-3",
            estrato1: 291,
            estrato2: 2404,
            estrato3: 4468,
            estrato4: 3768,
            estrato5: 1398,
            estrato6: 1008,
          },
          {
            tipo: "trimestre",
            periodo: "2023-4",
            estrato1: 302,
            estrato2: 2507,
            estrato3: 4881,
            estrato4: 4147,
            estrato5: 1619,
            estrato6: 1218,
          },
          {
            tipo: "trimestre",
            periodo: "2024-1",
            estrato1: 226,
            estrato2: 1984,
            estrato3: 4066,
            estrato4: 3037,
            estrato5: 1181,
            estrato6: 948,
          },
          {
            tipo: "trimestre",
            periodo: "2024-2",
            estrato1: 289,
            estrato2: 2450,
            estrato3: 5417,
            estrato4: 4256,
            estrato5: 1722,
            estrato6: 1269,
          },
          {
            tipo: "trimestre",
            periodo: "2024-3",
            estrato1: 283,
            estrato2: 2655,
            estrato3: 5323,
            estrato4: 4307,
            estrato5: 1837,
            estrato6: 1190,
          },
          {
            tipo: "trimestre",
            periodo: "2024-4",
            estrato1: 278,
            estrato2: 2822,
            estrato3: 6301,
            estrato4: 5335,
            estrato5: 2059,
            estrato6: 1744,
          },
          {
            tipo: "trimestre",
            periodo: "2025-1",
            estrato1: 211,
            estrato2: 2450,
            estrato3: 4865,
            estrato4: 4261,
            estrato5: 1721,
            estrato6: 1287,
          },
          {
            tipo: "trimestre",
            periodo: "2025-2",
            estrato1: 152,
            estrato2: 2135,
            estrato3: 4235,
            estrato4: 3960,
            estrato5: 1406,
            estrato6: 1337,
          },
        ];

        // --- Datos para el gráfico de Mapa (Transacciones por Localidad) ---
        //
        //
        const dataMap = [
          {
            tipo: "anio",
            periodo: "2019",
            BARRIOS_UNIDOS: 446,
            LOS_RIOS: 1115,
            BOSA: 2286,
            CHAPINERO: 3864,
            CIUDAD_BOLIVAR: 1524,
            ENGATIVA: 4036,
            FONTIBON: 3244,
            KENNEDY: 5941,
            CANDELARIA: 263,
            MARTIRES: 898,
            ANTONIO_NARINO: 1249,
            EL_CENTRO: 1191,
            CRISTOBAL: 1405,
            SANTA_FE: 1372,
            SUBA: 10594,
            USAQUEN: 1852,
            UNIDAD_JUDICIAL: 565,
            USUARIO: 8475,
            USME: 1216,
          },
          {
            tipo: "anio",
            periodo: "2020",
            BARRIOS_UNIDOS: 399,
            LOS_RIOS: 1008,
            BOSA: 1696,
            CHAPINERO: 4069,
            CIUDAD_BOLIVAR: 1595,
            ENGATIVA: 4294,
            FONTIBON: 3836,
            KENNEDY: 5088,
            CANDELARIA: 207,
            MARTIRES: 771,
            ANTONIO_NARINO: 1285,
            EL_CENTRO: 975,
            CRISTOBAL: 1290,
            SANTA_FE: 1128,
            SUBA: 10870,
            USAQUEN: 1937,
            UNIDAD_JUDICIAL: 440,
            USUARIO: 9179,
            USME: 1065,
          },
          {
            tipo: "anio",
            periodo: "2021",
            BARRIOS_UNIDOS: 645,
            LOS_RIOS: 1484,
            BOSA: 2866,
            CHAPINERO: 5262,
            CIUDAD_BOLIVAR: 2320,
            ENGATIVA: 6270,
            FONTIBON: 5651,
            KENNEDY: 8369,
            CANDELARIA: 395,
            MARTIRES: 1145,
            ANTONIO_NARINO: 1831,
            EL_CENTRO: 1770,
            CRISTOBAL: 1947,
            SANTA_FE: 1921,
            SUBA: 17680,
            USAQUEN: 2517,
            UNIDAD_JUDICIAL: 761,
            USUARIO: 13639,
            USME: 1768,
          },
          {
            tipo: "anio",
            periodo: "2022",
            BARRIOS_UNIDOS: 577,
            LOS_RIOS: 1633,
            BOSA: 2849,
            CHAPINERO: 6088,
            CIUDAD_BOLIVAR: 2557,
            ENGATIVA: 6351,
            FONTIBON: 6132,
            KENNEDY: 8243,
            CANDELARIA: 285,
            MARTIRES: 1191,
            ANTONIO_NARINO: 2043,
            EL_CENTRO: 1613,
            CRISTOBAL: 1737,
            SANTA_FE: 1822,
            SUBA: 17022,
            USAQUEN: 2793,
            UNIDAD_JUDICIAL: 845,
            USUARIO: 13292,
            USME: 1937,
          },
          {
            tipo: "anio",
            periodo: "2023",
            BARRIOS_UNIDOS: 444,
            LOS_RIOS: 1077,
            BOSA: 2278,
            CHAPINERO: 3684,
            CIUDAD_BOLIVAR: 1976,
            ENGATIVA: 4846,
            FONTIBON: 3815,
            KENNEDY: 5976,
            CANDELARIA: 245,
            MARTIRES: 972,
            ANTONIO_NARINO: 1422,
            EL_CENTRO: 1327,
            CRISTOBAL: 1524,
            SANTA_FE: 1379,
            SUBA: 11123,
            USAQUEN: 1943,
            UNIDAD_JUDICIAL: 605,
            USUARIO: 8630,
            USME: 1366,
          },
          {
            tipo: "anio",
            periodo: "2024",
            BARRIOS_UNIDOS: 511,
            LOS_RIOS: 1441,
            BOSA: 2611,
            CHAPINERO: 4997,
            CIUDAD_BOLIVAR: 2126,
            ENGATIVA: 5551,
            FONTIBON: 5541,
            KENNEDY: 7095,
            CANDELARIA: 298,
            MARTIRES: 1129,
            ANTONIO_NARINO: 1596,
            EL_CENTRO: 1464,
            CRISTOBAL: 1583,
            SANTA_FE: 1540,
            SUBA: 13674,
            USAQUEN: 2490,
            UNIDAD_JUDICIAL: 622,
            USUARIO: 11534,
            USME: 1528,
          },
          {
            tipo: "anio",
            periodo: "2025",
            BARRIOS_UNIDOS: 216,
            LOS_RIOS: 621,
            BOSA: 1109,
            CHAPINERO: 2444,
            CIUDAD_BOLIVAR: 961,
            ENGATIVA: 2174,
            FONTIBON: 2667,
            KENNEDY: 3052,
            CANDELARIA: 132,
            MARTIRES: 543,
            ANTONIO_NARINO: 1058,
            EL_CENTRO: 658,
            CRISTOBAL: 625,
            SANTA_FE: 720,
            SUBA: 6433,
            USAQUEN: 965,
            UNIDAD_JUDICIAL: 283,
            USUARIO: 5305,
            USME: 639,
          },
        ];

        // --- Datos para el gráfico de iconos (Transacciones por Tipo de Propiedad) ---
        //
        //
        //
        const propertyTypeData = {
          2019: [
            { value: 24575, name: "Apartamento" },
            { value: 8819, name: "Casa" },
            { value: 1104, name: "Local" },
            { value: 1355, name: "Oficina" },
            { value: 16043, name: "Resto" },
          ],
          2020: [
            { value: 24714, name: "Apartamento" },
            { value: 7509, name: "Casa" },
            { value: 969, name: "Local" },
            { value: 1207, name: "Oficina" },
            { value: 16733, name: "Resto" },
          ],
          2021: [
            { value: 38543, name: "Apartamento" },
            { value: 11497, name: "Casa" },
            { value: 1334, name: "Local" },
            { value: 1666, name: "Oficina" },
            { value: 25255, name: "Resto" },
          ],
          2022: [
            { value: 39275, name: "Apartamento" },
            { value: 11670, name: "Casa" },
            { value: 1323, name: "Local" },
            { value: 1654, name: "Oficina" },
            { value: 25138, name: "Resto" },
          ],
          2023: [
            { value: 26820, name: "Apartamento" },
            { value: 8709, name: "Casa" },
            { value: 1107, name: "Local" },
            { value: 1257, name: "Oficina" },
            { value: 16739, name: "Resto" },
          ],
          2024: [
            { value: 35055, name: "Apartamento" },
            { value: 9388, name: "Casa" },
            { value: 1301, name: "Local" },
            { value: 1360, name: "Oficina" },
            { value: 20227, name: "Resto" },
          ],
          2025: [
            { value: 16706, name: "Apartamento" },
            { value: 3825, name: "Casa" },
            { value: 470, name: "Local" },
            { value: 598, name: "Oficina" },
            { value: 9006, name: "Resto" },
          ],
          semestre: {
            "2019-1": [
              { value: 10921, name: "Apartamento" },
              { value: 3975, name: "Casa" },
              { value: 466, name: "Local" },
              { value: 544, name: "Oficina" },
              { value: 6984, name: "Resto" },
            ],
            "2019-2": [
              { value: 13654, name: "Apartamento" },
              { value: 4844, name: "Casa" },
              { value: 638, name: "Local" },
              { value: 811, name: "Oficina" },
              { value: 9059, name: "Resto" },
            ],
            "2020-1": [
              { value: 8812, name: "Apartamento" },
              { value: 2590, name: "Casa" },
              { value: 324, name: "Local" },
              { value: 476, name: "Oficina" },
              { value: 5711, name: "Resto" },
            ],
            "2020-2": [
              { value: 15902, name: "Apartamento" },
              { value: 4919, name: "Casa" },
              { value: 645, name: "Local" },
              { value: 731, name: "Oficina" },
              { value: 11022, name: "Resto" },
            ],
            "2021-1": [
              { value: 17542, name: "Apartamento" },
              { value: 5065, name: "Casa" },
              { value: 546, name: "Local" },
              { value: 712, name: "Oficina" },
              { value: 11325, name: "Resto" },
            ],
            "2021-2": [
              { value: 21001, name: "Apartamento" },
              { value: 6432, name: "Casa" },
              { value: 788, name: "Local" },
              { value: 954, name: "Oficina" },
              { value: 13930, name: "Resto" },
            ],
            "2022-1": [
              { value: 18538, name: "Apartamento" },
              { value: 5284, name: "Casa" },
              { value: 609, name: "Local" },
              { value: 676, name: "Oficina" },
              { value: 11565, name: "Resto" },
            ],
            "2022-2": [
              { value: 20737, name: "Apartamento" },
              { value: 6386, name: "Casa" },
              { value: 714, name: "Local" },
              { value: 978, name: "Oficina" },
              { value: 13573, name: "Resto" },
            ],
            "2023-1": [
              { value: 11449, name: "Apartamento" },
              { value: 3747, name: "Casa" },
              { value: 477, name: "Local" },
              { value: 476, name: "Oficina" },
              { value: 6817, name: "Resto" },
            ],
            "2023-2": [
              { value: 15371, name: "Apartamento" },
              { value: 4962, name: "Casa" },
              { value: 630, name: "Local" },
              { value: 781, name: "Oficina" },
              { value: 9922, name: "Resto" },
            ],
            "2024-1": [
              { value: 15492, name: "Apartamento" },
              { value: 4237, name: "Casa" },
              { value: 554, name: "Local" },
              { value: 550, name: "Oficina" },
              { value: 8699, name: "Resto" },
            ],
            "2024-2": [
              { value: 19563, name: "Apartamento" },
              { value: 5151, name: "Casa" },
              { value: 747, name: "Local" },
              { value: 810, name: "Oficina" },
              { value: 11528, name: "Resto" },
            ],
            "2025-1": [
              { value: 16705, name: "Apartamento" },
              { value: 3825, name: "Casa" },
              { value: 470, name: "Local" },
              { value: 598, name: "Oficina" },
              { value: 9004, name: "Resto" },
            ],
            "2025-2": [
              { value: 1, name: "Apartamento" },
              { value: 0, name: "Casa" },
              { value: 0, name: "Local" },
              { value: 0, name: "Oficina" },
              { value: 2, name: "Resto" },
            ],
          },
          trimestre: {
            "2019-1": [
              { value: 5979, name: "Apartamento" },
              { value: 2070, name: "Casa" },
              { value: 240, name: "Local" },
              { value: 256, name: "Oficina" },
              { value: 3835, name: "Resto" },
            ],
            "2019-2": [
              { value: 4942, name: "Apartamento" },
              { value: 1905, name: "Casa" },
              { value: 226, name: "Local" },
              { value: 288, name: "Oficina" },
              { value: 3149, name: "Resto" },
            ],
            "2019-3": [
              { value: 7553, name: "Apartamento" },
              { value: 2618, name: "Casa" },
              { value: 325, name: "Local" },
              { value: 422, name: "Oficina" },
              { value: 4942, name: "Resto" },
            ],
            "2019-4": [
              { value: 6101, name: "Apartamento" },
              { value: 2226, name: "Casa" },
              { value: 313, name: "Local" },
              { value: 389, name: "Oficina" },
              { value: 4117, name: "Resto" },
            ],
            "2020-1": [
              { value: 5314, name: "Apartamento" },
              { value: 1669, name: "Casa" },
              { value: 249, name: "Local" },
              { value: 331, name: "Oficina" },
              { value: 3336, name: "Resto" },
            ],
            "2020-2": [
              { value: 3498, name: "Apartamento" },
              { value: 921, name: "Casa" },
              { value: 75, name: "Local" },
              { value: 145, name: "Oficina" },
              { value: 2375, name: "Resto" },
            ],
            "2020-3": [
              { value: 6393, name: "Apartamento" },
              { value: 1911, name: "Casa" },
              { value: 244, name: "Local" },
              { value: 275, name: "Oficina" },
              { value: 4414, name: "Resto" },
            ],
            "2020-4": [
              { value: 9509, name: "Apartamento" },
              { value: 3008, name: "Casa" },
              { value: 401, name: "Local" },
              { value: 456, name: "Oficina" },
              { value: 6608, name: "Resto" },
            ],
            "2021-1": [
              { value: 8217, name: "Apartamento" },
              { value: 2327, name: "Casa" },
              { value: 225, name: "Local" },
              { value: 296, name: "Oficina" },
              { value: 5081, name: "Resto" },
            ],
            "2021-2": [
              { value: 9325, name: "Apartamento" },
              { value: 2738, name: "Casa" },
              { value: 321, name: "Local" },
              { value: 416, name: "Oficina" },
              { value: 6244, name: "Resto" },
            ],
            "2021-3": [
              { value: 10017, name: "Apartamento" },
              { value: 2964, name: "Casa" },
              { value: 340, name: "Local" },
              { value: 407, name: "Oficina" },
              { value: 6401, name: "Resto" },
            ],
            "2021-4": [
              { value: 10984, name: "Apartamento" },
              { value: 3468, name: "Casa" },
              { value: 448, name: "Local" },
              { value: 547, name: "Oficina" },
              { value: 7529, name: "Resto" },
            ],
            "2022-1": [
              { value: 8574, name: "Apartamento" },
              { value: 2437, name: "Casa" },
              { value: 311, name: "Local" },
              { value: 366, name: "Oficina" },
              { value: 5365, name: "Resto" },
            ],
            "2022-2": [
              { value: 9964, name: "Apartamento" },
              { value: 2847, name: "Casa" },
              { value: 298, name: "Local" },
              { value: 310, name: "Oficina" },
              { value: 6200, name: "Resto" },
            ],
            "2022-3": [
              { value: 10048, name: "Apartamento" },
              { value: 3097, name: "Casa" },
              { value: 303, name: "Local" },
              { value: 412, name: "Oficina" },
              { value: 6372, name: "Resto" },
            ],
            "2022-4": [
              { value: 10689, name: "Apartamento" },
              { value: 3289, name: "Casa" },
              { value: 411, name: "Local" },
              { value: 566, name: "Oficina" },
              { value: 7201, name: "Resto" },
            ],
            "2023-1": [
              { value: 4278, name: "Apartamento" },
              { value: 1340, name: "Casa" },
              { value: 151, name: "Local" },
              { value: 181, name: "Oficina" },
              { value: 2461, name: "Resto" },
            ],
            "2023-2": [
              { value: 7171, name: "Apartamento" },
              { value: 2407, name: "Casa" },
              { value: 326, name: "Local" },
              { value: 295, name: "Oficina" },
              { value: 4356, name: "Resto" },
            ],
            "2023-3": [
              { value: 7337, name: "Apartamento" },
              { value: 2381, name: "Casa" },
              { value: 299, name: "Local" },
              { value: 363, name: "Oficina" },
              { value: 4627, name: "Resto" },
            ],
            "2023-4": [
              { value: 8034, name: "Apartamento" },
              { value: 2581, name: "Casa" },
              { value: 331, name: "Local" },
              { value: 418, name: "Oficina" },
              { value: 5295, name: "Resto" },
            ],
            "2024-1": [
              { value: 6599, name: "Apartamento" },
              { value: 1872, name: "Casa" },
              { value: 231, name: "Local" },
              { value: 235, name: "Oficina" },
              { value: 3627, name: "Resto" },
            ],
            "2024-2": [
              { value: 8893, name: "Apartamento" },
              { value: 2365, name: "Casa" },
              { value: 323, name: "Local" },
              { value: 315, name: "Oficina" },
              { value: 5072, name: "Resto" },
            ],
            "2024-3": [
              { value: 9074, name: "Apartamento" },
              { value: 2357, name: "Casa" },
              { value: 382, name: "Local" },
              { value: 340, name: "Oficina" },
              { value: 5102, name: "Resto" },
            ],
            "2024-4": [
              { value: 10489, name: "Apartamento" },
              { value: 2794, name: "Casa" },
              { value: 365, name: "Local" },
              { value: 470, name: "Oficina" },
              { value: 6426, name: "Resto" },
            ],
            "2025-1": [
              { value: 8773, name: "Apartamento" },
              { value: 2119, name: "Casa" },
              { value: 261, name: "Local" },
              { value: 351, name: "Oficina" },
              { value: 4763, name: "Resto" },
            ],
            "2025-2": [
              { value: 7932, name: "Apartamento" },
              { value: 1706, name: "Casa" },
              { value: 209, name: "Local" },
              { value: 247, name: "Oficina" },
              { value: 4241, name: "Resto" },
            ],
          },
        };

        const dataCondicion = [
          { tipo: "anio", periodo: "2019", ph: 57697, nph: 10000 },
          { tipo: "anio", periodo: "2020", ph: 58879, nph: 8385 },
          { tipo: "anio", periodo: "2021", ph: 90407, nph: 12790 },
          { tipo: "anio", periodo: "2022", ph: 90623, nph: 12790 },
          { tipo: "anio", periodo: "2023", ph: 73411, nph: 9547 },
          { tipo: "anio", periodo: "2024", ph: 79877, nph: 10151 },
          { tipo: "anio", periodo: "2025", ph: 26557, nph: 4048 },
        ];

        const dataLocalidad = [
          // Datos anuales
          {
            tipo: "anio",
            periodo: "2019",
            "ANTONIO NARINO": 446,
            "BARRIOS UNIDOS": 1115,
            BOSA: 2286,
            CHAPINERO: 3864,
            "CIUDAD BOLIVAR": 1524,
            ENGATIVA: 4036,
            FONTIBON: 3244,
            KENNEDY: 5941,
            "LA CANDELARIA": 263,
            "LOS MARTIRES": 898,
            "PUENTE ARANDA": 1249,
            "RAFAEL URIBE URIBE": 1191,
            "SAN CRISTOBAL": 1405,
            "SANTA FE": 1372,
            SUBA: 10954,
            TEUSAQUILLO: 1852,
            TUNJUELITO: 565,
            USAQUEN: 8475,
            USME: 1216,
          },
          {
            tipo: "anio",
            periodo: "2020",
            "ANTONIO NARINO": 399,
            "BARRIOS UNIDOS": 1008,
            BOSA: 1696,
            CHAPINERO: 4069,
            "CIUDAD BOLIVAR": 1595,
            ENGATIVA: 4294,
            FONTIBON: 3836,
            KENNEDY: 5088,
            "LA CANDELARIA": 207,
            "LOS MARTIRES": 771,
            "PUENTE ARANDA": 1285,
            "RAFAEL URIBE URIBE": 975,
            "SAN CRISTOBAL": 1290,
            "SANTA FE": 1128,
            SUBA: 10870,
            TEUSAQUILLO: 1937,
            TUNJUELITO: 440,
            USAQUEN: 9179,
            USME: 1065,
          },
          {
            tipo: "anio",
            periodo: "2021",
            "ANTONIO NARINO": 645,
            "BARRIOS UNIDOS": 1484,
            BOSA: 2866,
            CHAPINERO: 5262,
            "CIUDAD BOLIVAR": 2320,
            ENGATIVA: 6270,
            FONTIBON: 5651,
            KENNEDY: 8369,
            "LA CANDELARIA": 395,
            "LOS MARTIRES": 1145,
            "PUENTE ARANDA": 1831,
            "RAFAEL URIBE URIBE": 1770,
            "SAN CRISTOBAL": 1947,
            "SANTA FE": 1921,
            SUBA: 17680,
            TEUSAQUILLO: 2517,
            TUNJUELITO: 761,
            USAQUEN: 13693,
            USME: 1768,
          },
          {
            tipo: "anio",
            periodo: "2022",
            "ANTONIO NARINO": 577,
            "BARRIOS UNIDOS": 1633,
            BOSA: 2849,
            CHAPINERO: 6088,
            "CIUDAD BOLIVAR": 2557,
            ENGATIVA: 6351,
            FONTIBON: 6132,
            KENNEDY: 8243,
            "LA CANDELARIA": 285,
            "LOS MARTIRES": 1191,
            "PUENTE ARANDA": 2043,
            "RAFAEL URIBE URIBE": 1613,
            "SAN CRISTOBAL": 1737,
            "SANTA FE": 1822,
            SUBA: 17072,
            TEUSAQUILLO: 2793,
            TUNJUELITO: 845,
            USAQUEN: 13292,
            USME: 1937,
          },
          {
            tipo: "anio",
            periodo: "2023",
            "ANTONIO NARINO": 444,
            "BARRIOS UNIDOS": 1077,
            BOSA: 2278,
            CHAPINERO: 3684,
            "CIUDAD BOLIVAR": 1976,
            ENGATIVA: 4846,
            FONTIBON: 3815,
            KENNEDY: 5976,
            "LA CANDELARIA": 245,
            "LOS MARTIRES": 972,
            "PUENTE ARANDA": 1422,
            "RAFAEL URIBE URIBE": 1327,
            "SAN CRISTOBAL": 1524,
            "SANTA FE": 1379,
            SUBA: 11123,
            TEUSAQUILLO: 1943,
            TUNJUELITO: 605,
            USAQUEN: 8630,
            USME: 1366,
          },
          {
            tipo: "anio",
            periodo: "2024",
            "ANTONIO NARINO": 511,
            "BARRIOS UNIDOS": 1441,
            BOSA: 2611,
            CHAPINERO: 4997,
            "CIUDAD BOLIVAR": 2126,
            ENGATIVA: 5551,
            FONTIBON: 5541,
            KENNEDY: 7095,
            "LA CANDELARIA": 298,
            "LOS MARTIRES": 1129,
            "PUENTE ARANDA": 1596,
            "RAFAEL URIBE URIBE": 1464,
            "SAN CRISTOBAL": 1583,
            "SANTA FE": 1540,
            SUBA: 13674,
            TEUSAQUILLO: 2490,
            TUNJUELITO: 622,
            USAQUEN: 11534,
            USME: 1528,
          },
          {
            tipo: "anio",
            periodo: "2025",
            "ANTONIO NARINO": 216,
            "BARRIOS UNIDOS": 621,
            BOSA: 1109,
            CHAPINERO: 2444,
            "CIUDAD BOLIVAR": 961,
            ENGATIVA: 2174,
            FONTIBON: 2667,
            KENNEDY: 3052,
            "LA CANDELARIA": 132,
            "LOS MARTIRES": 543,
            "PUENTE ARANDA": 1058,
            "RAFAEL URIBE URIBE": 658,
            "SAN CRISTOBAL": 625,
            "SANTA FE": 720,
            SUBA: 6433,
            TEUSAQUILLO: 965,
            TUNJUELITO: 283,
            USAQUEN: 5305,
            USME: 639,
          },

          // Datos semestrales
          {
            tipo: "semestre",
            periodo: "2019-1",
            "ANTONIO NARINO": 183,
            "BARRIOS UNIDOS": 451,
            BOSA: 1090,
            CHAPINERO: 1645,
            "CIUDAD BOLIVAR": 685,
            ENGATIVA: 1654,
            FONTIBON: 1292,
            KENNEDY: 2458,
            "LA CANDELARIA": 111,
            "LOS MARTIRES": 387,
            "PUENTE ARANDA": 518,
            "RAFAEL URIBE URIBE": 585,
            "SAN CRISTOBAL": 745,
            "SANTA FE": 546,
            SUBA: 5095,
            TEUSAQUILLO: 785,
            TUNJUELITO: 252,
            USAQUEN: 3834,
            USME: 574,
          },
          {
            tipo: "semestre",
            periodo: "2019-2",
            "ANTONIO NARINO": 263,
            "BARRIOS UNIDOS": 664,
            BOSA: 1196,
            CHAPINERO: 2219,
            "CIUDAD BOLIVAR": 839,
            ENGATIVA: 2382,
            FONTIBON: 1952,
            KENNEDY: 3483,
            "LA CANDELARIA": 152,
            "LOS MARTIRES": 511,
            "PUENTE ARANDA": 731,
            "RAFAEL URIBE URIBE": 606,
            "SAN CRISTOBAL": 660,
            "SANTA FE": 826,
            SUBA: 5859,
            TEUSAQUILLO: 1067,
            TUNJUELITO: 313,
            USAQUEN: 4641,
            USME: 642,
          },
          {
            tipo: "semestre",
            periodo: "2020-1",
            "ANTONIO NARINO": 165,
            "BARRIOS UNIDOS": 402,
            BOSA: 565,
            CHAPINERO: 1676,
            "CIUDAD BOLIVAR": 677,
            ENGATIVA: 1530,
            FONTIBON: 1449,
            KENNEDY: 1864,
            "LA CANDELARIA": 80,
            "LOS MARTIRES": 274,
            "PUENTE ARANDA": 469,
            "RAFAEL URIBE URIBE": 375,
            "SAN CRISTOBAL": 523,
            "SANTA FE": 458,
            SUBA: 3324,
            TEUSAQUILLO: 757,
            TUNJUELITO: 157,
            USAQUEN: 2823,
            USME: 345,
          },
          {
            tipo: "semestre",
            periodo: "2020-2",
            "ANTONIO NARINO": 234,
            "BARRIOS UNIDOS": 606,
            BOSA: 1131,
            CHAPINERO: 2393,
            "CIUDAD BOLIVAR": 918,
            ENGATIVA: 2764,
            FONTIBON: 2387,
            KENNEDY: 3224,
            "LA CANDELARIA": 127,
            "LOS MARTIRES": 497,
            "PUENTE ARANDA": 816,
            "RAFAEL URIBE URIBE": 600,
            "SAN CRISTOBAL": 767,
            "SANTA FE": 670,
            SUBA: 7546,
            TEUSAQUILLO: 1180,
            TUNJUELITO: 283,
            USAQUEN: 6356,
            USME: 720,
          },
          {
            tipo: "semestre",
            periodo: "2021-1",
            "ANTONIO NARINO": 297,
            "BARRIOS UNIDOS": 593,
            BOSA: 1315,
            CHAPINERO: 2337,
            "CIUDAD BOLIVAR": 1020,
            ENGATIVA: 2773,
            FONTIBON: 2471,
            KENNEDY: 3747,
            "LA CANDELARIA": 245,
            "LOS MARTIRES": 467,
            "PUENTE ARANDA": 760,
            "RAFAEL URIBE URIBE": 778,
            "SAN CRISTOBAL": 989,
            "SANTA FE": 948,
            SUBA: 8013,
            TEUSAQUILLO: 1123,
            TUNJUELITO: 345,
            USAQUEN: 6105,
            USME: 864,
          },
          {
            tipo: "semestre",
            periodo: "2021-2",
            "ANTONIO NARINO": 348,
            "BARRIOS UNIDOS": 891,
            BOSA: 1551,
            CHAPINERO: 2925,
            "CIUDAD BOLIVAR": 1300,
            ENGATIVA: 3497,
            FONTIBON: 3180,
            KENNEDY: 4622,
            "LA CANDELARIA": 150,
            "LOS MARTIRES": 678,
            "PUENTE ARANDA": 1071,
            "RAFAEL URIBE URIBE": 992,
            "SAN CRISTOBAL": 958,
            "SANTA FE": 973,
            SUBA: 9667,
            TEUSAQUILLO: 1394,
            TUNJUELITO: 416,
            USAQUEN: 7588,
            USME: 904,
          },
          {
            tipo: "semestre",
            periodo: "2022-1",
            "ANTONIO NARINO": 261,
            "BARRIOS UNIDOS": 717,
            BOSA: 1341,
            CHAPINERO: 2664,
            "CIUDAD BOLIVAR": 1245,
            ENGATIVA: 2918,
            FONTIBON: 3254,
            KENNEDY: 3830,
            "LA CANDELARIA": 124,
            "LOS MARTIRES": 535,
            "PUENTE ARANDA": 865,
            "RAFAEL URIBE URIBE": 740,
            "SAN CRISTOBAL": 825,
            "SANTA FE": 735,
            SUBA: 7995,
            TEUSAQUILLO: 1299,
            TUNJUELITO: 392,
            USAQUEN: 6067,
            USME: 865,
          },
          {
            tipo: "semestre",
            periodo: "2022-2",
            "ANTONIO NARINO": 316,
            "BARRIOS UNIDOS": 916,
            BOSA: 1508,
            CHAPINERO: 3424,
            "CIUDAD BOLIVAR": 1312,
            ENGATIVA: 3433,
            FONTIBON: 2878,
            KENNEDY: 4413,
            "LA CANDELARIA": 161,
            "LOS MARTIRES": 656,
            "PUENTE ARANDA": 1178,
            "RAFAEL URIBE URIBE": 873,
            "SAN CRISTOBAL": 912,
            "SANTA FE": 1087,
            SUBA: 9077,
            TEUSAQUILLO: 1494,
            TUNJUELITO: 453,
            USAQUEN: 7225,
            USME: 1072,
          },
          {
            tipo: "semestre",
            periodo: "2023-1",
            "ANTONIO NARINO": 178,
            "BARRIOS UNIDOS": 433,
            BOSA: 960,
            CHAPINERO: 1350,
            "CIUDAD BOLIVAR": 910,
            ENGATIVA: 1983,
            FONTIBON: 1614,
            KENNEDY: 2503,
            "LA CANDELARIA": 98,
            "LOS MARTIRES": 470,
            "PUENTE ARANDA": 589,
            "RAFAEL URIBE URIBE": 600,
            "SAN CRISTOBAL": 613,
            "SANTA FE": 594,
            SUBA: 4711,
            TEUSAQUILLO: 787,
            TUNJUELITO: 274,
            USAQUEN: 3684,
            USME: 615,
          },
          {
            tipo: "semestre",
            periodo: "2023-2",
            "ANTONIO NARINO": 266,
            "BARRIOS UNIDOS": 644,
            BOSA: 1318,
            CHAPINERO: 2334,
            "CIUDAD BOLIVAR": 1066,
            ENGATIVA: 2863,
            FONTIBON: 2201,
            KENNEDY: 3473,
            "LA CANDELARIA": 147,
            "LOS MARTIRES": 502,
            "PUENTE ARANDA": 833,
            "RAFAEL URIBE URIBE": 727,
            "SAN CRISTOBAL": 911,
            "SANTA FE": 785,
            SUBA: 6412,
            TEUSAQUILLO: 1156,
            TUNJUELITO: 331,
            USAQUEN: 4946,
            USME: 751,
          },
          {
            tipo: "semestre",
            periodo: "2024-1",
            "ANTONIO NARINO": 206,
            "BARRIOS UNIDOS": 632,
            BOSA: 1176,
            CHAPINERO: 2086,
            "CIUDAD BOLIVAR": 938,
            ENGATIVA: 2499,
            FONTIBON: 2293,
            KENNEDY: 3134,
            "LA CANDELARIA": 124,
            "LOS MARTIRES": 508,
            "PUENTE ARANDA": 755,
            "RAFAEL URIBE URIBE": 667,
            "SAN CRISTOBAL": 725,
            "SANTA FE": 693,
            SUBA: 5984,
            TEUSAQUILLO: 1100,
            TUNJUELITO: 267,
            USAQUEN: 5052,
            USME: 693,
          },
          {
            tipo: "semestre",
            periodo: "2024-2",
            "ANTONIO NARINO": 305,
            "BARRIOS UNIDOS": 809,
            BOSA: 1435,
            CHAPINERO: 2911,
            "CIUDAD BOLIVAR": 1188,
            ENGATIVA: 3052,
            FONTIBON: 3248,
            KENNEDY: 3961,
            "LA CANDELARIA": 174,
            "LOS MARTIRES": 621,
            "PUENTE ARANDA": 841,
            "RAFAEL URIBE URIBE": 797,
            "SAN CRISTOBAL": 858,
            "SANTA FE": 847,
            SUBA: 7690,
            TEUSAQUILLO: 1390,
            TUNJUELITO: 355,
            USAQUEN: 6482,
            USME: 835,
          },
          {
            tipo: "semestre",
            periodo: "2025-1",
            "ANTONIO NARINO": 216,
            "BARRIOS UNIDOS": 621,
            BOSA: 1109,
            CHAPINERO: 2444,
            "CIUDAD BOLIVAR": 961,
            ENGATIVA: 2174,
            FONTIBON: 2664,
            KENNEDY: 3052,
            "LA CANDELARIA": 132,
            "LOS MARTIRES": 543,
            "PUENTE ARANDA": 1058,
            "RAFAEL URIBE URIBE": 658,
            "SAN CRISTOBAL": 625,
            "SANTA FE": 720,
            SUBA: 6433,
            TEUSAQUILLO: 965,
            TUNJUELITO: 283,
            USAQUEN: 5305,
            USME: 639,
          },
          {
            tipo: "semestre",
            periodo: "2025-2",
            "ANTONIO NARINO": 0,
            "BARRIOS UNIDOS": 0,
            BOSA: 0,
            CHAPINERO: 0,
            "CIUDAD BOLIVAR": 0,
            ENGATIVA: 0,
            FONTIBON: 3,
            KENNEDY: 0,
            "LA CANDELARIA": 0,
            "LOS MARTIRES": 0,
            "PUENTE ARANDA": 0,
            "RAFAEL URIBE URIBE": 0,
            "SAN CRISTOBAL": 0,
            "SANTA FE": 0,
            SUBA: 0,
            TEUSAQUILLO: 0,
            TUNJUELITO: 0,
            USAQUEN: 0,
            USME: 0,
          },

          // Datos trimestrales
          {
            tipo: "trimestre",
            periodo: "2019-1",
            "ANTONIO NARINO": 100,
            "BARRIOS UNIDOS": 248,
            BOSA: 551,
            CHAPINERO: 881,
            "CIUDAD BOLIVAR": 359,
            ENGATIVA: 882,
            FONTIBON: 663,
            KENNEDY: 1340,
            "LA CANDELARIA": 55,
            "LOS MARTIRES": 203,
            "PUENTE ARANDA": 271,
            "RAFAEL URIBE URIBE": 335,
            "SAN CRISTOBAL": 465,
            "SANTA FE": 287,
            SUBA: 2774,
            TEUSAQUILLO: 432,
            TUNJUELITO: 143,
            USAQUEN: 2103,
            USME: 286,
          },
          {
            tipo: "trimestre",
            periodo: "2019-2",
            "ANTONIO NARINO": 83,
            "BARRIOS UNIDOS": 203,
            BOSA: 539,
            CHAPINERO: 764,
            "CIUDAD BOLIVAR": 326,
            ENGATIVA: 772,
            FONTIBON: 629,
            KENNEDY: 1118,
            "LA CANDELARIA": 56,
            "LOS MARTIRES": 184,
            "PUENTE ARANDA": 247,
            "RAFAEL URIBE URIBE": 250,
            "SAN CRISTOBAL": 280,
            "SANTA FE": 259,
            SUBA: 2321,
            TEUSAQUILLO: 353,
            TUNJUELITO: 109,
            USAQUEN: 1731,
            USME: 288,
          },
          {
            tipo: "trimestre",
            periodo: "2019-3",
            "ANTONIO NARINO": 155,
            "BARRIOS UNIDOS": 343,
            BOSA: 678,
            CHAPINERO: 1080,
            "CIUDAD BOLIVAR": 425,
            ENGATIVA: 1153,
            FONTIBON: 932,
            KENNEDY: 1670,
            "LA CANDELARIA": 70,
            "LOS MARTIRES": 261,
            "PUENTE ARANDA": 355,
            "RAFAEL URIBE URIBE": 326,
            "SAN CRISTOBAL": 381,
            "SANTA FE": 422,
            SUBA: 3642,
            TEUSAQUILLO: 538,
            TUNJUELITO: 184,
            USAQUEN: 2884,
            USME: 361,
          },
          {
            tipo: "trimestre",
            periodo: "2019-4",
            "ANTONIO NARINO": 108,
            "BARRIOS UNIDOS": 321,
            BOSA: 518,
            CHAPINERO: 1139,
            "CIUDAD BOLIVAR": 414,
            ENGATIVA: 1229,
            FONTIBON: 1020,
            KENNEDY: 1813,
            "LA CANDELARIA": 82,
            "LOS MARTIRES": 250,
            "PUENTE ARANDA": 376,
            "RAFAEL URIBE URIBE": 280,
            "SAN CRISTOBAL": 279,
            "SANTA FE": 404,
            SUBA: 2217,
            TEUSAQUILLO: 529,
            TUNJUELITO: 129,
            USAQUEN: 1757,
            USME: 281,
          },
          {
            tipo: "trimestre",
            periodo: "2020-1",
            "ANTONIO NARINO": 107,
            "BARRIOS UNIDOS": 274,
            BOSA: 359,
            CHAPINERO: 1011,
            "CIUDAD BOLIVAR": 389,
            ENGATIVA: 980,
            FONTIBON: 938,
            KENNEDY: 1206,
            "LA CANDELARIA": 54,
            "LOS MARTIRES": 182,
            "PUENTE ARANDA": 302,
            "RAFAEL URIBE URIBE": 250,
            "SAN CRISTOBAL": 389,
            "SANTA FE": 352,
            SUBA: 1844,
            TEUSAQUILLO: 464,
            TUNJUELITO: 91,
            USAQUEN: 1476,
            USME: 231,
          },
          {
            tipo: "trimestre",
            periodo: "2020-2",
            "ANTONIO NARINO": 58,
            "BARRIOS UNIDOS": 128,
            BOSA: 206,
            CHAPINERO: 665,
            "CIUDAD BOLIVAR": 288,
            ENGATIVA: 550,
            FONTIBON: 511,
            KENNEDY: 658,
            "LA CANDELARIA": 26,
            "LOS MARTIRES": 92,
            "PUENTE ARANDA": 167,
            "RAFAEL URIBE URIBE": 125,
            "SAN CRISTOBAL": 134,
            "SANTA FE": 106,
            SUBA: 1480,
            TEUSAQUILLO: 293,
            TUNJUELITO: 66,
            USAQUEN: 1347,
            USME: 114,
          },
          {
            tipo: "trimestre",
            periodo: "2020-3",
            "ANTONIO NARINO": 67,
            "BARRIOS UNIDOS": 244,
            BOSA: 450,
            CHAPINERO: 970,
            "CIUDAD BOLIVAR": 366,
            ENGATIVA: 1145,
            FONTIBON: 964,
            KENNEDY: 1238,
            "LA CANDELARIA": 42,
            "LOS MARTIRES": 181,
            "PUENTE ARANDA": 306,
            "RAFAEL URIBE URIBE": 227,
            "SAN CRISTOBAL": 275,
            "SANTA FE": 219,
            SUBA: 3025,
            TEUSAQUILLO: 479,
            TUNJUELITO: 95,
            USAQUEN: 2639,
            USME: 305,
          },
          {
            tipo: "trimestre",
            periodo: "2020-4",
            "ANTONIO NARINO": 167,
            "BARRIOS UNIDOS": 362,
            BOSA: 681,
            CHAPINERO: 1423,
            "CIUDAD BOLIVAR": 552,
            ENGATIVA: 1619,
            FONTIBON: 1423,
            KENNEDY: 1986,
            "LA CANDELARIA": 85,
            "LOS MARTIRES": 316,
            "PUENTE ARANDA": 510,
            "RAFAEL URIBE URIBE": 373,
            "SAN CRISTOBAL": 492,
            "SANTA FE": 451,
            SUBA: 4521,
            TEUSAQUILLO: 701,
            TUNJUELITO: 188,
            USAQUEN: 3717,
            USME: 415,
          },
          {
            tipo: "trimestre",
            periodo: "2021-1",
            "ANTONIO NARINO": 130,
            "BARRIOS UNIDOS": 273,
            BOSA: 587,
            CHAPINERO: 1029,
            "CIUDAD BOLIVAR": 489,
            ENGATIVA: 1367,
            FONTIBON: 1024,
            KENNEDY: 1743,
            "LA CANDELARIA": 120,
            "LOS MARTIRES": 217,
            "PUENTE ARANDA": 356,
            "RAFAEL URIBE URIBE": 311,
            "SAN CRISTOBAL": 451,
            "SANTA FE": 391,
            SUBA: 3691,
            TEUSAQUILLO: 555,
            TUNJUELITO: 151,
            USAQUEN: 2846,
            USME: 415,
          },
          {
            tipo: "trimestre",
            periodo: "2021-2",
            "ANTONIO NARINO": 167,
            "BARRIOS UNIDOS": 320,
            BOSA: 728,
            CHAPINERO: 1308,
            "CIUDAD BOLIVAR": 531,
            ENGATIVA: 1406,
            FONTIBON: 1447,
            KENNEDY: 2004,
            "LA CANDELARIA": 125,
            "LOS MARTIRES": 250,
            "PUENTE ARANDA": 404,
            "RAFAEL URIBE URIBE": 467,
            "SAN CRISTOBAL": 538,
            "SANTA FE": 557,
            SUBA: 4322,
            TEUSAQUILLO: 568,
            TUNJUELITO: 194,
            USAQUEN: 3259,
            USME: 449,
          },
          {
            tipo: "trimestre",
            periodo: "2021-3",
            "ANTONIO NARINO": 153,
            "BARRIOS UNIDOS": 393,
            BOSA: 775,
            CHAPINERO: 1273,
            "CIUDAD BOLIVAR": 617,
            ENGATIVA: 1635,
            FONTIBON: 1532,
            KENNEDY: 2119,
            "LA CANDELARIA": 52,
            "LOS MARTIRES": 309,
            "PUENTE ARANDA": 486,
            "RAFAEL URIBE URIBE": 490,
            "SAN CRISTOBAL": 436,
            "SANTA FE": 423,
            SUBA: 4597,
            TEUSAQUILLO: 619,
            TUNJUELITO: 200,
            USAQUEN: 3593,
            USME: 427,
          },
          {
            tipo: "trimestre",
            periodo: "2021-4",
            "ANTONIO NARINO": 195,
            "BARRIOS UNIDOS": 498,
            BOSA: 776,
            CHAPINERO: 1652,
            "CIUDAD BOLIVAR": 683,
            ENGATIVA: 1862,
            FONTIBON: 1648,
            KENNEDY: 2503,
            "LA CANDELARIA": 98,
            "LOS MARTIRES": 369,
            "PUENTE ARANDA": 585,
            "RAFAEL URIBE URIBE": 502,
            "SAN CRISTOBAL": 522,
            "SANTA FE": 550,
            SUBA: 5070,
            TEUSAQUILLO: 775,
            TUNJUELITO: 216,
            USAQUEN: 3995,
            USME: 477,
          },
          {
            tipo: "trimestre",
            periodo: "2022-1",
            "ANTONIO NARINO": 128,
            "BARRIOS UNIDOS": 323,
            BOSA: 613,
            CHAPINERO: 1300,
            "CIUDAD BOLIVAR": 570,
            ENGATIVA: 1343,
            FONTIBON: 1467,
            KENNEDY: 1768,
            "LA CANDELARIA": 66,
            "LOS MARTIRES": 246,
            "PUENTE ARANDA": 398,
            "RAFAEL URIBE URIBE": 354,
            "SAN CRISTOBAL": 377,
            "SANTA FE": 388,
            SUBA: 3660,
            TEUSAQUILLO: 621,
            TUNJUELITO: 186,
            USAQUEN: 2857,
            USME: 388,
          },
          {
            tipo: "trimestre",
            periodo: "2022-2",
            "ANTONIO NARINO": 133,
            "BARRIOS UNIDOS": 394,
            BOSA: 728,
            CHAPINERO: 1364,
            "CIUDAD BOLIVAR": 675,
            ENGATIVA: 1575,
            FONTIBON: 1787,
            KENNEDY: 2062,
            "LA CANDELARIA": 58,
            "LOS MARTIRES": 289,
            "PUENTE ARANDA": 467,
            "RAFAEL URIBE URIBE": 386,
            "SAN CRISTOBAL": 448,
            "SANTA FE": 347,
            SUBA: 4335,
            TEUSAQUILLO: 678,
            TUNJUELITO: 206,
            USAQUEN: 3210,
            USME: 477,
          },
          {
            tipo: "trimestre",
            periodo: "2022-3",
            "ANTONIO NARINO": 142,
            "BARRIOS UNIDOS": 442,
            BOSA: 724,
            CHAPINERO: 1446,
            "CIUDAD BOLIVAR": 662,
            ENGATIVA: 1685,
            FONTIBON: 1358,
            KENNEDY: 2196,
            "LA CANDELARIA": 72,
            "LOS MARTIRES": 305,
            "PUENTE ARANDA": 526,
            "RAFAEL URIBE URIBE": 438,
            "SAN CRISTOBAL": 467,
            "SANTA FE": 437,
            SUBA: 4401,
            TEUSAQUILLO: 721,
            TUNJUELITO: 218,
            USAQUEN: 3449,
            USME: 543,
          },
          {
            tipo: "trimestre",
            periodo: "2022-4",
            "ANTONIO NARINO": 174,
            "BARRIOS UNIDOS": 474,
            BOSA: 784,
            CHAPINERO: 1978,
            "CIUDAD BOLIVAR": 650,
            ENGATIVA: 1748,
            FONTIBON: 1520,
            KENNEDY: 2217,
            "LA CANDELARIA": 89,
            "LOS MARTIRES": 351,
            "PUENTE ARANDA": 652,
            "RAFAEL URIBE URIBE": 435,
            "SAN CRISTOBAL": 445,
            "SANTA FE": 650,
            SUBA: 4676,
            TEUSAQUILLO: 773,
            TUNJUELITO: 235,
            USAQUEN: 3776,
            USME: 529,
          },
          {
            tipo: "trimestre",
            periodo: "2023-1",
            "ANTONIO NARINO": 68,
            "BARRIOS UNIDOS": 152,
            BOSA: 362,
            CHAPINERO: 472,
            "CIUDAD BOLIVAR": 366,
            ENGATIVA: 720,
            FONTIBON: 626,
            KENNEDY: 947,
            "LA CANDELARIA": 37,
            "LOS MARTIRES": 145,
            "PUENTE ARANDA": 193,
            "RAFAEL URIBE URIBE": 217,
            "SAN CRISTOBAL": 217,
            "SANTA FE": 246,
            SUBA: 1704,
            TEUSAQUILLO: 263,
            TUNJUELITO: 102,
            USAQUEN: 1366,
            USME: 208,
          },
          {
            tipo: "trimestre",
            periodo: "2023-2",
            "ANTONIO NARINO": 110,
            "BARRIOS UNIDOS": 281,
            BOSA: 598,
            CHAPINERO: 878,
            "CIUDAD BOLIVAR": 544,
            ENGATIVA: 1263,
            FONTIBON: 988,
            KENNEDY: 1556,
            "LA CANDELARIA": 61,
            "LOS MARTIRES": 325,
            "PUENTE ARANDA": 396,
            "RAFAEL URIBE URIBE": 383,
            "SAN CRISTOBAL": 396,
            "SANTA FE": 348,
            SUBA: 3007,
            TEUSAQUILLO: 524,
            TUNJUELITO: 172,
            USAQUEN: 2318,
            USME: 407,
          },
          {
            tipo: "trimestre",
            periodo: "2023-3",
            "ANTONIO NARINO": 131,
            "BARRIOS UNIDOS": 295,
            BOSA: 666,
            CHAPINERO: 1084,
            "CIUDAD BOLIVAR": 529,
            ENGATIVA: 1449,
            FONTIBON: 989,
            KENNEDY: 1647,
            "LA CANDELARIA": 73,
            "LOS MARTIRES": 229,
            "PUENTE ARANDA": 378,
            "RAFAEL URIBE URIBE": 358,
            "SAN CRISTOBAL": 439,
            "SANTA FE": 326,
            SUBA: 3003,
            TEUSAQUILLO: 546,
            TUNJUELITO: 160,
            USAQUEN: 2336,
            USME: 369,
          },
          {
            tipo: "trimestre",
            periodo: "2023-4",
            "ANTONIO NARINO": 135,
            "BARRIOS UNIDOS": 349,
            BOSA: 652,
            CHAPINERO: 1250,
            "CIUDAD BOLIVAR": 537,
            ENGATIVA: 1414,
            FONTIBON: 1212,
            KENNEDY: 1826,
            "LA CANDELARIA": 74,
            "LOS MARTIRES": 273,
            "PUENTE ARANDA": 455,
            "RAFAEL URIBE URIBE": 369,
            "SAN CRISTOBAL": 472,
            "SANTA FE": 459,
            SUBA: 3409,
            TEUSAQUILLO: 610,
            TUNJUELITO: 171,
            USAQUEN: 2610,
            USME: 382,
          },
          {
            tipo: "trimestre",
            periodo: "2024-1",
            "ANTONIO NARINO": 81,
            "BARRIOS UNIDOS": 262,
            BOSA: 504,
            CHAPINERO: 911,
            "CIUDAD BOLIVAR": 388,
            ENGATIVA: 1090,
            FONTIBON: 986,
            KENNEDY: 1302,
            "LA CANDELARIA": 65,
            "LOS MARTIRES": 207,
            "PUENTE ARANDA": 320,
            "RAFAEL URIBE URIBE": 297,
            "SAN CRISTOBAL": 343,
            "SANTA FE": 318,
            SUBA: 2549,
            TEUSAQUILLO: 483,
            TUNJUELITO: 133,
            USAQUEN: 2026,
            USME: 299,
          },
          {
            tipo: "trimestre",
            periodo: "2024-2",
            "ANTONIO NARINO": 125,
            "BARRIOS UNIDOS": 370,
            BOSA: 672,
            CHAPINERO: 1175,
            "CIUDAD BOLIVAR": 550,
            ENGATIVA: 1409,
            FONTIBON: 1307,
            KENNEDY: 1832,
            "LA CANDELARIA": 59,
            "LOS MARTIRES": 301,
            "PUENTE ARANDA": 435,
            "RAFAEL URIBE URIBE": 370,
            "SAN CRISTOBAL": 382,
            "SANTA FE": 375,
            SUBA: 3435,
            TEUSAQUILLO: 617,
            TUNJUELITO: 134,
            USAQUEN: 3026,
            USME: 394,
          },
          {
            tipo: "trimestre",
            periodo: "2024-3",
            "ANTONIO NARINO": 127,
            "BARRIOS UNIDOS": 349,
            BOSA: 701,
            CHAPINERO: 1250,
            "CIUDAD BOLIVAR": 560,
            ENGATIVA: 1313,
            FONTIBON: 1518,
            KENNEDY: 1860,
            "LA CANDELARIA": 81,
            "LOS MARTIRES": 318,
            "PUENTE ARANDA": 387,
            "RAFAEL URIBE URIBE": 378,
            "SAN CRISTOBAL": 423,
            "SANTA FE": 402,
            SUBA: 3564,
            TEUSAQUILLO: 605,
            TUNJUELITO: 155,
            USAQUEN: 2862,
            USME: 402,
          },
          {
            tipo: "trimestre",
            periodo: "2024-4",
            "ANTONIO NARINO": 178,
            "BARRIOS UNIDOS": 460,
            BOSA: 734,
            CHAPINERO: 1661,
            "CIUDAD BOLIVAR": 628,
            ENGATIVA: 1739,
            FONTIBON: 1730,
            KENNEDY: 2101,
            "LA CANDELARIA": 93,
            "LOS MARTIRES": 303,
            "PUENTE ARANDA": 454,
            "RAFAEL URIBE URIBE": 419,
            "SAN CRISTOBAL": 435,
            "SANTA FE": 445,
            SUBA: 4126,
            TEUSAQUILLO: 785,
            TUNJUELITO: 200,
            USAQUEN: 3620,
            USME: 433,
          },
          {
            tipo: "trimestre",
            periodo: "2025-1",
            "ANTONIO NARINO": 122,
            "BARRIOS UNIDOS": 351,
            BOSA: 598,
            CHAPINERO: 1278,
            "CIUDAD BOLIVAR": 545,
            ENGATIVA: 1214,
            FONTIBON: 1406,
            KENNEDY: 1738,
            "LA CANDELARIA": 81,
            "LOS MARTIRES": 313,
            "PUENTE ARANDA": 444,
            "RAFAEL URIBE URIBE": 347,
            "SAN CRISTOBAL": 338,
            "SANTA FE": 442,
            SUBA: 3358,
            TEUSAQUILLO: 557,
            TUNJUELITO: 164,
            USAQUEN: 2679,
            USME: 292,
          },
          {
            tipo: "trimestre",
            periodo: "2025-2",
            "ANTONIO NARINO": 94,
            "BARRIOS UNIDOS": 270,
            BOSA: 511,
            CHAPINERO: 1166,
            "CIUDAD BOLIVAR": 416,
            ENGATIVA: 960,
            FONTIBON: 1258,
            KENNEDY: 1314,
            "LA CANDELARIA": 51,
            "LOS MARTIRES": 230,
            "PUENTE ARANDA": 614,
            "RAFAEL URIBE URIBE": 311,
            "SAN CRISTOBAL": 287,
            "SANTA FE": 278,
            SUBA: 3075,
            TEUSAQUILLO: 408,
            TUNJUELITO: 119,
            USAQUEN: 2626,
            USME: 347,
          },
        ];

        const dataSectores = [
          {
            tipo: "anio",
            periodo: "2024",
            name: "CIUDAD HAYUELOS",
            value: 3012,
          },
          { tipo: "anio", periodo: "2024", name: "MONTEVIDEO", value: 2141 },
          { tipo: "anio", periodo: "2024", name: "EL PLAN", value: 1688 },
          {
            tipo: "anio",
            periodo: "2024",
            name: "SAN JOSE DE USAQUEN",
            value: 1338,
          },
          { tipo: "anio", periodo: "2024", name: "TINTALA", value: 1139 },
          {
            tipo: "anio",
            periodo: "2024",
            name: "EL VERGEL ORIENTAL",
            value: 1101,
          },
          { tipo: "anio", periodo: "2024", name: "TUNA BAJA", value: 1084 },
          { tipo: "anio", periodo: "2024", name: "LOS CEDROS", value: 971 },
          {
            tipo: "anio",
            periodo: "2024",
            name: "PRIMAVERA OCCIDENTAL",
            value: 868,
          },
          {
            tipo: "anio",
            periodo: "2024",
            name: "CIUDAD TECHO II",
            value: 810,
          },

          { tipo: "anio", periodo: "2025", name: "EL PLAN", value: 766 },
          {
            tipo: "anio",
            periodo: "2025",
            name: "CIUDAD HAYUELOS",
            value: 437,
          },
          { tipo: "anio", periodo: "2025", name: "TINTALA", value: 361 },
          { tipo: "anio", periodo: "2025", name: "CAOBOS SALAZAR", value: 333 },
          {
            tipo: "anio",
            periodo: "2025",
            name: "SANTA BARBARA OCCIDENTAL",
            value: 327,
          },
          {
            tipo: "anio",
            periodo: "2025",
            name: "CIUDAD TECHO II",
            value: 308,
          },
          { tipo: "anio", periodo: "2025", name: "LOS CEDROS", value: 308 },
          {
            tipo: "anio",
            periodo: "2025",
            name: "ACACIAS USAQUEN",
            value: 289,
          },
          { tipo: "anio", periodo: "2025", name: "CHICO NORTE", value: 288 },
          {
            tipo: "anio",
            periodo: "2025",
            name: "SANTA BARBARA CENTRAL",
            value: 277,
          },
        ];

        // --- Gráfico 1: Línea - Venta Total de Inmuebles en Bogotá (Main Chart) ---
        var lineChart = echarts.init(
          document.getElementById("line-chart"),
          "essos"
        );
        var chartRadarMonths = echarts.init(
          document.getElementById("radar-chart-months"),
          "essos"
        );
        var chartRadarStrata = echarts.init(
          document.getElementById("radar-chart-strata"),
          "essos"
        );
        var chartMap = echarts.init(
          document.getElementById("map-grafico"),
          "essos"
        );
        var chartIcons = echarts.init(
          document.getElementById("icons-chart"),
          "essos"
        );

        // Función para actualizar el gráfico de línea y el radar
        function updateLineChart(timePeriod) {
          let filteredData = [];
          let chartTitle = "Venta Total de Inmuebles en Bogotá";
          let selectedYear = "2024"; // Año por defecto

          if (timePeriod === "año") {
            // Para vista por años, mostrar todos los años
            filteredData = dataLine.filter((d) => d.tipo === "anio");
            chartTitle += " (2019-2025)";
            selectedYear = "2024"; // Año actual por defecto
          } else if (timePeriod === "semestre") {
            // Mostrar todos los semestres desde 2019 hasta 2025
            filteredData = dataLine.filter((d) => d.tipo === "semestre");
            chartTitle += " (Semestral)";
            selectedYear = "2024";
          } else if (timePeriod === "trimestre") {
            // Mostrar todos los trimestres desde 2019 hasta 2025
            filteredData = dataLine.filter((d) => d.tipo === "trimestre");
            chartTitle += " (Trimestral)";
            selectedYear = "2024";
          }

          // Actualizar también el gráfico radar
          updateRadarChart(selectedYear);

          const optionLine = {
            title: {
              text: chartTitle,
              left: "center",
              top: "20px",
            },
            tooltip: {
              trigger: "axis",
              formatter: function (params) {
                return (
                  params[0].name +
                  ": " +
                  params[0].value.toLocaleString("es-CO") +
                  " transacciones"
                );
              },
            },
            grid: {
              left: "5%",
              right: "5%",
              bottom: "15%",
              top: "15%",
              containLabel: true,
            },
            xAxis: {
              type: "category",
              data: filteredData.map((d) => d.periodo),
              axisLabel: {
                fontSize: 12,
                color: "#333",
                rotate: timePeriod === "año" ? 0 : 45,
                interval: 0,
              },
            },
            yAxis: {
              type: "value",
              axisLabel: {
                fontSize: 12,
                color: "#333",
                formatter: function (value) {
                  return value.toLocaleString("es-CO");
                },
              },
              splitLine: {
                lineStyle: {
                  type: "dashed",
                },
              },
            },
            series: [
              {
                name: "Total",
                type: "line",
                data: filteredData.map((d) => d.total),
                symbol: "circle",
                symbolSize: 6,
                lineStyle: {
                  width: 3,
                },
                itemStyle: {
                  color: "rgba(255, 171, 0)",
                },
                areaStyle: {
                  color: {
                    type: "linear",
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [
                      {
                        offset: 0,
                        color: "rgba(255, 171, 0,0.3)",
                      },
                      {
                        offset: 1,
                        color: "rgba(255, 171, 0,0.1)",
                      },
                    ],
                  },
                },
              },
            ],
          };

          lineChart.setOption(optionLine, true);
        }

        var loadingOptionLine = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        lineChart.setOption(loadingOptionLine);

        // Inicializar el gráfico con los datos por año
        updateLineChart("año");

        // Event listener para el cambio de año en el gráfico radar
        document
          .getElementById("filter-radar1-year")
          .addEventListener("change", function () {
            const selectedYear = this.value;
            updateRadarChart(selectedYear);
          });

        // --- Gráfico 2: Radar - Meses con Mayor Dinámica ---
        var chartRadarMonths = echarts.init(
          document.getElementById("radar-chart-months"),
          "essos"
        );
        var loadingOptionRadar = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#FEB400" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        chartRadarMonths.setOption(loadingOptionRadar);

        // Inicializar el gráfico radar con el año por defecto (2024)
        setTimeout(() => {
          updateRadarChart("2024");
        }, 100);

        function updateRadarChart(selectedYear) {
          console.log("Actualizando radar con año:", selectedYear);
          // Filtrar datos para el año seleccionado
          const currentYearData = datosRadar
            .filter((d) => d.periodo.startsWith(selectedYear))
            .sort(
              (a, b) =>
                parseInt(a.periodo.split("-")[1]) -
                parseInt(b.periodo.split("-")[1])
            );

          console.log("Datos filtrados:", currentYearData);

          // Encontrar el valor máximo para escalar el gráfico
          const maxValue = Math.max(...datosRadar.map((d) => d.valor));

          var optionRadarMonths = {
            title: {
              text: "Meses con Mayor Dinámica",
              left: "center",
              top: "1%",
              padding: [0, 0, 20, 0], // padding adicional en la parte inferior del título
              subtext: `Año ${selectedYear}`,
            },
            tooltip: {
              trigger: "item",
              formatter: function (params) {
                const monthName = new Date(params.name + "-01").toLocaleString(
                  "es-CO",
                  { month: "long" }
                );
                return (
                  monthName.charAt(0).toUpperCase() +
                  monthName.slice(1) +
                  "<br/>" +
                  params.value.toLocaleString("es-CO") +
                  " transacciones"
                );
              },
            },
            legend: {
              show: false,
            },
            radar: [
              {
                indicator: [
                  { text: "Enero", max: maxValue },
                  { text: "Febrero", max: maxValue },
                  { text: "Marzo", max: maxValue },
                  { text: "Abril", max: maxValue },
                  { text: "Mayo", max: maxValue },
                  { text: "Junio", max: maxValue },
                  { text: "Julio", max: maxValue },
                  { text: "Agosto", max: maxValue },
                  { text: "Septiembre", max: maxValue },
                  { text: "Octubre", max: maxValue },
                  { text: "Noviembre", max: maxValue },
                  { text: "Diciembre", max: maxValue },
                ],
                radius: "55%",
                center: ["50%", "55%"],
                name: {
                  textStyle: {
                    color: "#333",
                    fontSize: 12,
                  },
                },
                splitLine: {
                  lineStyle: {
                    color: "rgba(0,0,0,0.1)", // Lighter lines for radar grid
                  },
                },
                splitArea: {
                  areaStyle: {
                    color: ["rgba(200,200,200,0.05)", "rgba(200,200,200,0.1)"], // Lighter fill for radar areas
                  },
                },
              },
            ],
            series: [
              {
                type: "radar",
                data: [
                  {
                    value: currentYearData.map((d) => d.valor),
                    name: selectedYear,
                    symbolSize: 4,
                    lineStyle: {
                      width: 2,
                    },
                    areaStyle: {
                      opacity: 0.3,
                    },
                  },
                ],
              },
            ],
          };
          chartRadarMonths.setOption(optionRadarMonths, true);
        }

        // --- Gráfico 3: Torta - Inmuebles Residenciales Vendidos por Estratos ---
        var chartPieStrata = echarts.init(
          document.getElementById("radar-chart-strata"),
          "essos"
        );
        chartPieStrata.setOption(loadingOptionRadar); // animación de carga

        // Función para actualizar el gráfico según el año seleccionado
        function actualizarPiePorAno(anioSeleccionado) {
          const datosAnio = dataPie.find(
            (d) => d.tipo === "anio" && d.periodo === anioSeleccionado
          );

          if (!datosAnio) return; // Si no hay datos, salir

          const dataSeries = [
            { value: datosAnio.estrato1, name: "Estrato 1" },
            { value: datosAnio.estrato2, name: "Estrato 2" },
            { value: datosAnio.estrato3, name: "Estrato 3" },
            { value: datosAnio.estrato4, name: "Estrato 4" },
            { value: datosAnio.estrato5, name: "Estrato 5" },
            { value: datosAnio.estrato6, name: "Estrato 6" },
          ];

          const optionPieStrata = {
            title: {
              text: `Inmuebles Vendidos por Estrato - ${anioSeleccionado}`,
              left: "center",
              top: "2%",
            },
            tooltip: {
              trigger: "item",
              formatter: "{a} <br/>{b}: {c} ({d}%)",
            },
            legend: {
              top: "bottom",
              left: "center",
              orient: "horizontal",
              data: dataSeries.map((item) => item.name),
              textStyle: { color: "#333" },
            },
            series: [
              {
                name: "Ventas por Estrato",
                type: "pie",
                radius: ["40%", "70%"], // donut
                avoidLabelOverlap: false,
                itemStyle: {
                  borderRadius: 10,
                  borderColor: "#fff",
                  borderWidth: 2,
                },
                label: { show: false, position: "center" },
                emphasis: {
                  label: {
                    show: true,
                    fontSize: 20,
                    fontWeight: "bold",
                  },
                },
                labelLine: { show: false },
                data: dataSeries,
              },
            ],
          };

          chartPieStrata.setOption(optionPieStrata, true);
        }

        // --- Evento para el selector ---
        document
          .getElementById("filter-pie-year")
          .addEventListener("change", function () {
            actualizarPiePorAno(this.value);
          });

        // --- Inicializar gráfico con el año por defecto del select ---
        setTimeout(function () {
          const anioInicial = document.getElementById("filter-pie-year").value;
          actualizarPiePorAno(anioInicial);
        }, 2000);

        // --- Mapeo de abreviaturas a nombres de localidades ---
        const localidadMap = {
          ANTONIO_NARINO: "ANTONIO NARIÑO",
          BARRIOS_UNIDOS: "BARRIOS UNIDOS",
          BOSA: "BOSA",
          CHAPINERO: "CHAPINERO",
          CIUDAD_BOLIVAR: "CIUDAD BOLIVAR",
          ENGATIVA: "ENGATIVA",
          FONTIBON: "FONTIBON",
          KENNEDY: "KENNEDY",
          CANDELARIA: "CANDELARIA",
          MARTIRES: "LOS MARTIRES",
          PUENTE_ARANDA: "PUENTE ARANDA",
          RAFAEL_URIBE_URIBE: "RAFAEL URIBE URIBE",
          SAN_CRISTOBAL: "SAN CRISTOBAL",
          SANTA_FE: "SANTA FE",
          SUBA: "SUBA",
          TEUSAQUILLO: "TEUSAQUILLO",
          TUNJUELITO: "TUNJUELITO",
          USAQUEN: "USAQUEN",
          USME: "USME",
        };

        // --- Función para obtener datos por año ---
        function getSalesDataByYear(year) {
          const registro = dataMap.find((d) => d.periodo === year);
          if (!registro) return [];
          return Object.keys(localidadMap).map((key) => ({
            name: localidadMap[key],
            value: registro[key] || 0,
          }));
        }

        // --- Inicializar gráfico con tema "essos" ---
        var myChart = echarts.init(
          document.getElementById("map-grafico"),
          "essos"
        );

        // --- Animación de carga ---
        var loadingOptionMap = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        myChart.setOption(loadingOptionMap);

        // --- Cargar mapa después de animación ---
        setTimeout(function () {
          fetch("localidades.geojson")
            .then((response) => {
              if (!response.ok) throw new Error("Error en red");
              return response.json();
            })
            .then((geojson) => {
              geojson.features = geojson.features.filter(
                (f) => f.properties && f.properties.LocNombre !== "SUMAPAZ"
              );

              // Rotar coordenadas
              geojson.features.forEach((feature) => {
                if (feature.geometry && feature.geometry.coordinates) {
                  feature.geometry.coordinates.forEach(function rotatePolygon(
                    coords
                  ) {
                    if (
                      Array.isArray(coords[0]) &&
                      typeof coords[0][0] === "number"
                    ) {
                      coords.forEach((point) => {
                        const temp = point[0];
                        point[0] = point[1];
                        point[1] = -temp;
                      });
                    } else if (Array.isArray(coords[0])) {
                      coords.forEach(rotatePolygon);
                    }
                  });
                }
              });

              echarts.registerMap("BogotaLocalidades", geojson);

              // Función para renderizar mapa
              function renderMap(year) {
                const salesData = getSalesDataByYear(year);
                const maxSales = Math.max(
                  ...salesData.map((item) => item.value)
                );

                myChart.setOption({
                  title: {
                    text: `Transacciones por Localidad - ${year}`,
                    subtext: "Fuente: Datos Inventados",
                    left: "center",
                  },
                  tooltip: {
                    trigger: "item",
                    formatter: (params) =>
                      params.data
                        ? `Localidad: ${params.name}<br/>Ventas: ${params.value} inmuebles`
                        : "N/A",
                  },
                  visualMap: {
                    //

                    //
                    //
                    //

                    min: 0,
                    max: maxSales,
                    left: "left",
                    top: "bottom",
                    text: ["Alto", "Bajo"],
                    calculable: true,
                    inRange: { color: ["#f9d68f", "#FEB400"] },
                    textStyle: { color: "#333" },
                  },
                  series: [
                    {
                      name: "Ventas de Inmuebles",
                      type: "map",
                      map: "BogotaLocalidades",
                      roam: true,
                      zoom: 2.0,
                      aspectScale: 1,
                      layoutCenter: ["50%", "50%"],
                      layoutSize: "95%",
                      transform: { rotation: 90 },
                      selectedMode: false,
                      label: { show: true, fontSize: 8, color: "#000000" },
                      itemStyle: {
                        areaColor: "#f0f0f0",
                        borderColor: "#000000",
                      },
                      emphasis: {
                        label: { show: true, color: "#000" },
                        itemStyle: { areaColor: "#ffd700" },
                      },
                      data: salesData,
                      nameProperty: "LocNombre",
                    },
                  ],
                });
              }

              // Evento para cambiar año
              document
                .getElementById("filter-map-year")
                .addEventListener("change", (e) => {
                  renderMap(e.target.value);
                });

              // Render inicial
              renderMap(document.getElementById("filter-map-year").value);
            })
            .catch((error) => {
              console.error("Error al cargar o procesar el GeoJSON:", error);
              myChart.setOption({
                title: {
                  text: "Error al cargar el mapa",
                  subtext: "No se pudo cargar el archivo GeoJSON",
                  left: "center",
                  top: "center",
                  textStyle: { color: "#e74c3c" },
                },
              });
            });
        }, 4000);

        // --- Gráfico 5: Barras con Iconos - Transacciones por Tipo de Propiedad ---
        var chartIcons = echarts.init(
          document.getElementById("icons-chart"),
          "essos"
        );
        var loadingOptionIcons = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        chartIcons.setOption(loadingOptionIcons);

        setTimeout(function () {
          chartIcons.clear();
          const pathSymbols = {
            apartmento:
              "path://M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z", // Placeholder for apartment icon
            casa: "path://M1 6V15H6V11C6 9.89543 6.89543 9 8 9C9.10457 9 10 9.89543 10 11V15H15V6L8 0L1 6Z",
            local:
              'path://M4.87617 3.75H19.1238L21 8.86683V10.5C21 11.2516 20.7177 11.9465 20.25 12.4667V21H3.75V12.4667C3.28234 11.9465 3 11.2516 3 10.5V8.86683L4.87617 3.75ZM18.1875 13.3929C18.3807 13.3929 18.5688 13.3731 18.75 13.3355V19.5H15V15H9L9 19.5H5.25V13.3355C5.43122 13.3731 5.61926 13.3929 5.8125 13.3929C6.63629 13.3929 7.36559 13.0334 7.875 12.4667C8.38441 13.0334 9.11371 13.3929 9.9375 13.3929C10.7613 13.3929 11.4906 13.0334 12 12.4667C12.5094 13.0334 13.2387 13.3929 14.0625 13.3929C14.8863 13.3929 15.6156 13.0334 16.125 12.4667C16.6344 13.0334 17.3637 13.3929 18.1875 13.3929ZM10.5 19.5H13.5V16.5H10.5L10.5 19.5ZM19.5 9.75V10.5C19.5 11.2965 18.8856 11.8929 18.1875 11.8929C17.4894 11.8929 16.875 11.2965 16.875 10.5V9.75H19.5ZM19.1762 8.25L18.0762 5.25H5.92383L4.82383 8.25H19.1762ZM4.5 9.75V10.5C4.5 11.2965 5.11439 11.8929 5.8125 11.8929C6.51061 11.8929 7.125 11.2965 7.125 10.5V9.75H4.5ZM8.625 9.75V10.5C8.625 11.2965 9.23939 11.8929 9.9375 11.8929C10.6356 11.8929 11.25 11.2965 11.25 10.5V9.75H8.625ZM12.75 9.75V10.5C12.75 11.2965 13.3644 11.8929 14.0625 11.8929C14.7606 11.8929 15.375 11.2965 15.375 10.5V9.75H12.75Z"',
            oficina:
              "path://M3.55,119.32H0v3.56H92.49v-3.56h-2v-17a1.22,1.22,0,0,0-1.22-1.22H75.54a1.22,1.22,0,0,0-1.22,1.22v17H48.47V95.23a1.63,1.63,0,0,0-1.63-1.62H19.94a1.63,1.63,0,0,0-1.63,1.62v24.09H0V2.6A2.79,2.79,0,0,1,.82.85h0a2.84,2.84,0,0,1,2-.84H63.93a2.82,2.82,0,0,1,2,.84l.13.13a2.83,2.83,0,0,1,.72,1.89V34.57H102a2.39,2.39,0,0,1,1.69.7h0a2.36,2.36,0,0,1,.7,1.68v84.29a1.63,1.63,0,0,1-1.63,1.63H92.49v-3.56H101V38H66.79v81.34H63.23V3.56H3.55V119.32Zm84.54,0H76.76V103.5H88.09v15.82ZM85.45,45h8.81c.07,0,.13.1.13.22v5.71c0,.1-.06.21-.13.21H85.45c-.07,0-.13-.09-.13-.21V45.22c0-.12.06-.22.13-.22Zm0,39.6h8.81c.07,0,.13.1.13.21v5.71c0,.11-.06.22-.13.22H85.45c-.07,0-.13-.1-.13-.22V84.81c0-.11.06-.21.13-.11Zm-14.85,0h8.8c.08,0,.14.1.14.21v5.71c0,.11-.06.22-.14.22H70.6c-.08,0-.14-.1-.14-.22V84.81c0-.11.06-.21.14-.21ZM85.45,71.4h8.81c.07,0,.13.1.13.22v5.71c0,.11-.06.22-.13.22H85.45c-.07,0-.13-.1-.13-.22V71.62c0-.13.06-.22.13-.22Zm0-13.2h8.81c.07,0,.13.1.13.22v5.71c0,.11-.06.22-.13.22H85.45c-.07,0-.13-.1-.13-.22V58.42c0-.12.06-.22.13-.22ZM70.6,45h8.8c.08,0,.14.1.14.22v5.71c0,.1-.06.21-.14.21H70.6c-.08,0-.14-.09-.14-.21V45.22c0-.12.06-.22.14-.22Zm0,26.4h8.8c.08,0,.14.1.14.22v5.71c0,.11-.06.22-.14.22H70.6c-.08,0-.14-.1-.14-.22V71.62c0-.13.06-.22.14-.22Zm0-13.2h8.8c.08,0,.14.1.14.22v5.71c0,.11-.06.22-.14.22H70.6c-.08,0-.14-.1-.14-.22V58.42c0-.12.06-.22.14-.22ZM45.21,119.32H21.57V96.86H45.21v22.46ZM12.13,12.52h9.58a.28.28,0,0,1,.27.27v9.59a.28.28,0,0,1-.27.27H12.13a.28.28,0,0,1-.27-.27V12.79a.28.28,0,0,1,.27-.27Zm32.94,0h9.58a.28.28,0,0,1,.27.27v9.59a.28.28,0,0,1-.27.27H45.07a.28.28,0,0,1-.27-.27V12.79a.28.28,0,0,1,.27-.27Zm-16.47,0h9.58a.28.28,0,0,1-.27.27v9.59a.28.28,0,0,1-.27.27H28.6a.28.28,0,0,1-.27-.27V12.79a.28.28,0,0,1,.27-.27ZM12.13,33.28h9.58a.28.28,0,0,1,.27.27v9.59a.28.28,0,0,1-.27.27H12.13a.28.28,0,0,1-.27-.27V33.55a.28.28,0,0,1,.27-.27Zm32.94,0h9.58a.28.28,0,0,1,.27.27v9.59a.28.28,0,0,1-.27.27H45.07a.28.28,0,0,1-.27-.27V33.55a.28.28,0,0,1,.27-.27Zm-16.47,0h9.58a.28.28,0,0,1-.27.27v9.59a.28.28,0,0,1-.27.27H28.6a.28.28,0,0,1-.27-.27V33.55a.28.28,0,0,1,.27-.27ZM12.13,74.8h9.58a.27.27,0,0,1,.27.27v9.58a.27.27,0,0,1-.27.27H12.13a.27.27,0,0,1-.27-.27V75.07a.27.27,0,0,1,.27-.27Zm32.94,0h9.58a.27.27,0,0,1,.27.27v9.58a.27.27,0,0,1-.27.27H45.07a.27.27,0,0,1-.27-.27V75.07a.27.27,0,0,1,.27-.27Zm-16.47,0h9.58a.27.27,0,0,1-.27.27v9.58a.27.27,0,0,1-.27.27H28.6a.27.27,0,0,1-.27-.27V75.07a.27.27,0,0,1,.27-.27ZM12.13,54h9.58a.27.27,0,0,1,.27.27V63.9a.28.28,0,0,1-.27.27H12.13a.28.28,0,0,1-.27-.27V54.31a.27.27,0,0,1,.27-.27Zm32.94,0h9.58a.27.27,0,0,1,.27.27V63.9a.28.28,0,0,1-.27.27H45.07a.28.28,0,0,1-.27-.27V54.31a.27.27,0,0,1,.27-.27ZM28.6,54h9.58a.27.27,0,0,1,.27.27V63.9a.28.28,0,0,1-.27.27H28.6a.28.28,0,0,1-.27-.27V54.31A.27.27,0,0,1,28.6,54Z",
            resto:
              "path://M21 9.75H19.5V18.3107L18.3107 19.5H5.68934L4.5 18.3107L4.5 9.75H3V4.5H21V9.75ZM6 9.75L18 9.75V17.6893L17.6893 18H6.31066L6 17.6893L6 9.75ZM19.5 6V8.25L4.5 8.25L4.5 6L19.5 6ZM9.75 13.5H15V12H9.75V13.5Z",
          };
          const labelSetting = {
            show: true,
            position: "right",
            offset: [10, 0],
            fontSize: 16,
            color: "#333", // Dark text for labels
          };

          // Function to update the Icons Chart based on filters
          function updateIconsChart(timePeriod, year) {
            let dataToDisplay = [];
            let chartTitle = "Transacciones por Tipo de Propiedad";

            let rawData = [];
            if (timePeriod === "año") {
              rawData = propertyTypeData[year] || [];
            } else if (timePeriod === "semestre") {
              rawData = propertyTypeData.semestre[year] || [];
            } else if (timePeriod === "trimestre") {
              rawData = propertyTypeData.trimestre[year] || [];
            }

            const orden = ["Apartamento", "Casa", "Oficina", "Local", "Resto"];
            dataToDisplay = orden.map((tipo) => {
              const found = rawData.find((d) => d.name.trim() === tipo.trim());
              return found || { value: 0, name: tipo };
            });
            if (year === "historico") {
              // Sum data for all years
              const aggregatedData = {};
              for (let y = 2019; y <= 2025; y++) {
                if (propertyTypeData[y]) {
                  propertyTypeData[y].forEach((item) => {
                    if (!aggregatedData[item.name]) {
                      aggregatedData[item.name] = 0;
                    }
                    aggregatedData[item.name] += item.value;
                  });
                }
              }
              dataToDisplay = Object.keys(aggregatedData).map((name) => ({
                value: aggregatedData[name],
                name: name,
              }));
              chartTitle += " (Histórico 2019-2025)";
            } else if (timePeriod === "semestre") {
              // For semestre, we need to show both semesters of the selected year
              const semester1Data =
                propertyTypeData.semestre[`${year}-1`] || [];
              const semester2Data =
                propertyTypeData.semestre[`${year}-2`] || [];

              // Aggregate data for the two semesters for display
              const aggregatedSemesterData = {};
              semester1Data.forEach((item) => {
                aggregatedSemesterData[item.name] = item.value;
              });
              semester2Data.forEach((item) => {
                if (!aggregatedSemesterData[item.name]) {
                  aggregatedSemesterData[item.name] = 0;
                }
                aggregatedSemesterData[item.name] += item.value;
              });

              dataToDisplay = Object.keys(aggregatedSemesterData).map(
                (name) => ({
                  value: aggregatedSemesterData[name],
                  name: name,
                })
              );
              chartTitle += ` (${year} - Semestres)`;
            } else if (timePeriod === "trimestre") {
              // For trimestre, we need to show all four quarters of the selected year
              const q1Data = propertyTypeData.trimestre[`${year}-1`] || [];
              const q2Data = propertyTypeData.trimestre[`${year}-2`] || [];
              const q3Data = propertyTypeData.trimestre[`${year}-3`] || [];
              const q4Data = propertyTypeData.trimestre[`${year}-4`] || [];

              const aggregatedQuarterData = {};
              [...q1Data, ...q2Data, ...q3Data, ...q4Data].forEach((item) => {
                if (!aggregatedQuarterData[item.name]) {
                  aggregatedQuarterData[item.name] = 0;
                }
                aggregatedQuarterData[item.name] += item.value;
              });

              dataToDisplay = Object.keys(aggregatedQuarterData).map(
                (name) => ({
                  value: aggregatedQuarterData[name],
                  name: name,
                })
              );
              chartTitle += ` (${year} - Trimestres)`;
            }

            // Ensure data order is consistent with yAxis categories
            const yAxisCategories = [
              "Apartamento",
              "Casa",
              "Oficina",
              "Local",
              "Resto",
            ];
            const formattedData = yAxisCategories.map((category) => {
              // Buscar el dato correspondiente a esta categoría
              const item = dataToDisplay.find(
                (d) => d.name.trim() === category.trim()
              );
              // Si se encuentra el dato, usar su valor, si no, usar 0
              const value = item ? item.value : 0;
              return {
                value: value,
                name: category,
                symbol:
                  pathSymbols[category.toLowerCase().replace(" ", "")] ||
                  pathSymbols.resto,
              };
            });

            const optionIcons = {
              title: {
                text: chartTitle,
                top: "0%",
                left: "center",
              },
              legend: {
                show: false,
              },
              tooltip: {
                trigger: "axis",
                axisPointer: { type: "shadow" },
                formatter: function (params) {
                  return `${params[0].name}: ${params[0].value.toLocaleString(
                    "es-CO"
                  )}`;
                },
              },
              grid: {
                containLabel: true,
                left: 20,
                right: 50, // Added right padding for labels
              },
              yAxis: {
                data: yAxisCategories,
                inverse: true,
                axisLine: { show: false },
                axisTick: { show: false },
                axisLabel: {
                  margin: 20,
                  fontSize: 14,
                  color: "#333",
                },
                axisPointer: {
                  label: { show: true, margin: 200 },
                },
              },
              xAxis: {
                splitLine: { show: false },
                axisLabel: { show: false },
                axisTick: { show: false },
                axisLine: { show: false },
              },
              series: [
                {
                  name: "Transacciones",
                  type: "pictorialBar",
                  label: labelSetting,
                  symbolRepeat: true,
                  symbolSize: ["80%", "60%"],
                  barCategoryGap: "40%",
                  data: formattedData,
                },
              ],
            };
            chartIcons.setOption(optionIcons, true);
          }

          // Get filter elements
          const filterIconsTime = document.getElementById("filter-icons-time");
          const filterIconsYear = document.getElementById("filter-icons-year");

          // Initial chart render
          updateIconsChart(filterIconsTime.value, filterIconsYear.value);

          // Add event listeners for filters
          filterIconsTime.addEventListener("change", () => {
            updateIconsChart(filterIconsTime.value, filterIconsYear.value);
          });
          filterIconsYear.addEventListener("change", () => {
            updateIconsChart(filterIconsTime.value, filterIconsYear.value);
          });

          // Get line chart filter element
          const filterLineTime = document.getElementById("filter-line-time");

          // Initial line chart render
          updateLineChart(filterLineTime.value);

          // Add event listener for line chart filter
          filterLineTime.addEventListener("change", () => {
            updateLineChart(filterLineTime.value);
          });
        }, 2000);

        // --- Gráfico 6: Torta - Transacciones de inmuebles Usados y Nuevos (Condición Jurídica) ---
        // --- Inicialización del gráfico con tu tema 'essos' ---
        var chartTort = echarts.init(
          document.getElementById("tort-chart"),
          "essos"
        );

        // --- Animación de carga que ya tenías ---
        var loadingOptionTort = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        chartTort.setOption(loadingOptionTort);

        // --- Función para construir la opción usando datos reales ---
        function buildTortOption(year) {
          const yearData = dataCondicion.find((d) => d.periodo === year);
          const ph = yearData ? yearData.ph : 0;
          const nph = yearData ? yearData.nph : 0;
          const total = ph + nph;
          const phPercent = total ? Math.round((ph / total) * 100) : 0;
          const nphPercent = total ? Math.round((nph / total) * 100) : 0;

          return {
            title: {
              text: "Transacciones por Condición Jurídica\n(Horizontal vs No Horizontal)",
              left: "center",
              top: "2%",
              textStyle: {
                color: "#333",
                fontSize: 20,
                fontWeight: "bold",
                lineHeight: 26,
              },
            },
            series: [
              {
                type: "gauge",
                startAngle: 90,
                endAngle: -270,
                center: ["50%", "60%"],
                pointer: { show: false },
                progress: {
                  show: true,
                  overlap: false,
                  roundCap: true,
                  clip: false,
                  itemStyle: { borderWidth: 1, borderColor: "#ccc" },
                },
                axisLine: { lineStyle: { width: 40 } },
                splitLine: { show: false, distance: 0, length: 10 },
                axisTick: { show: false },
                axisLabel: { show: false, distance: 50 },
                data: [
                  {
                    value: phPercent,
                    name: "PH",
                    title: {
                      offsetCenter: ["0%", "-45%"],
                      fontSize: 16,
                      color: "#333",
                      fontFamily: "Nunito Sans",
                    },
                    detail: {
                      valueAnimation: true,
                      offsetCenter: ["0%", "-25%"],
                      fontSize: 16,
                      color: "#606060",
                      fontFamily: "Nunito Sans",
                    },
                  },
                  {
                    value: nphPercent,
                    name: "NPH",
                    title: {
                      offsetCenter: ["0%", "15%"],
                      fontSize: 18,
                      color: "#333",
                      fontFamily: "Nunito Sans",
                    },
                    detail: {
                      valueAnimation: true,
                      offsetCenter: ["0%", "35%"],
                      fontSize: 16,
                      color: "#606060",
                      fontFamily: "Nunito Sans",
                    },
                  },
                ],
                title: { fontSize: 18, color: "#333" },
                detail: {
                  width: 60,
                  height: 18,
                  fontSize: 16,
                  color: "#00eaff",
                  borderColor: "inherit",
                  borderRadius: 20,
                  borderWidth: 1,
                  fontFamily: "Nunito Sans",
                  formatter: "{value}%",
                },
              },
            ],
          };
        }

        // --- Mostrar gráfico inicial después de animación ---
        setTimeout(function () {
          const initialYear = document.getElementById("filter-tort-year").value;
          chartTort.setOption(buildTortOption(initialYear), true);
        }, 2000);

        // --- Escuchar cambios en el selector ---
        document
          .getElementById("filter-tort-year")
          .addEventListener("change", function (e) {
            chartTort.setOption(buildTortOption(e.target.value), true);
          });

        // --- Hacerlo responsive ---
        window.addEventListener("resize", () => chartTort.resize());

        // --- Gráfico#7: Transacciones por SECTORES ---
        //
        //
        //
        //
        //
        var chartSectores = echarts.init(
          document.getElementById("totalTransacciones-chart"),
          "essos"
        );

        var loadingOptionMainBar = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        chartSectores.setOption(loadingOptionMainBar);

        // Función para actualizar gráfico según el año
        function updateMainBarChart(year) {
          console.log("[chartSectores] Año recibido:", year);
          const filteredData = dataSectores.filter((d) => d.periodo === year);
          console.log("[chartSectores] Datos filtrados:", filteredData);
          if (!filteredData || filteredData.length === 0) {
            console.warn("[chartSectores] No hay datos para el año:", year);
            return;
          }
          const sortedData = filteredData.sort((a, b) => b.value - a.value);
          const yData = sortedData.map((d) => d.name);
          const xData = sortedData.map((d) => d.value);
          console.log("[chartSectores] yData:", yData);
          console.log("[chartSectores] xData:", xData);
          const option = {
            title: {
              text: `Transacciones por Localidad - ${year}`,
              left: "center",
              top: 10,
            },
            tooltip: {
              trigger: "axis",
              axisPointer: { type: "shadow" },
              formatter: (params) => {
                const data = params[0];
                return `${data.name}: ${data.value.toLocaleString("es-CO")}`;
              },
            },
            grid: { left: 120, right: 50, top: 60, bottom: 30 },
            xAxis: {
              type: "value",
              boundaryGap: [0, 0.01],
            },
            yAxis: {
              type: "category",
              data: yData,
              inverse: true,
            },
            series: [
              {
                name: "Transacciones",
                type: "bar",
                data: xData,
                itemStyle: {
                  color: "#FEB400",
                },
                label: {
                  show: true,
                  position: "right",
                  formatter: (val) => val.value.toLocaleString("es-CO"),
                },
              },
            ],
          };
          console.log("[chartSectores] Option generado:", option);
          // Verificar existencia y visibilidad del div
          var chartDiv = document.getElementById('totalTransacciones-chart');
          if (!chartDiv) {
            console.error('No existe el div con id totalTransacciones-chart');
          } else {
            console.log('Div totalTransacciones-chart existe. display:', chartDiv.style.display, 'visibility:', chartDiv.style.visibility);
          }
          // Verificar instancia de chartSectores
          if (!chartSectores) {
            console.error('chartSectores no está inicializado');
          } else {
            console.log('chartSectores está inicializado');
          }
          // Log antes de setOption
          console.log('Aplicando option a chartSectores...');
          chartSectores.clear();
          chartSectores.setOption(option);
          // Log después de setOption
          console.log('Option aplicado a chartSectores');
        }

        // Render inicial usando el año del selector correcto
        setTimeout(() => {
          const year = document.getElementById("filter-main-bar1-year").value;
          updateMainBarChart(year);
        }, 2000);

        // Evento para el selector de año (sin conflicto de nombre)
        const filterMainBar1Year = document.getElementById("filter-main-bar1-year");
        filterMainBar1Year.addEventListener("change", () => {
          updateMainBarChart(filterMainBar1Year.value);
        });




        // --- Gráfico 8: Barras - Transacciones por Localidad (Original chart1 from user's JS) ---
        //
        //
        //
        //


      
        var mainBarChart = echarts.init(
          document.getElementById("main-bar-chart"),
          "essos"
        );

        var loadingOptionBar = {
          graphic: {
            elements: [
              {
                type: "group",
                left: "center",
                top: "center",
                children: new Array(7).fill(0).map((val, i) => ({
                  type: "rect",
                  x: i * 20,
                  shape: { x: 0, y: -40, width: 10, height: 80 },
                  style: { fill: "#5470c6" },
                  keyframeAnimation: {
                    duration: 1000,
                    delay: i * 200,
                    loop: true,
                    keyframes: [
                      { percent: 0.5, scaleY: 0.3, easing: "cubicIn" },
                      { percent: 1, scaleY: 1, easing: "cubicOut" },
                    ],
                  },
                })),
              },
            ],
          },
        };
        mainBarChart.setOption(loadingOptionBar);

        // --- Función para obtener datos por año ---
        function getDataByYear(year) {
          const record = dataLocalidad.find((d) => d.periodo === year);
          if (!record) return { localidades: [], valores: [] };

          // Quitar propiedades que no son localidades
          const localidades = Object.keys(record).filter(
            (k) => !["tipo", "periodo"].includes(k)
          );
          const valores = localidades.map((loc) => record[loc]);
          return { localidades, valores };
        }

        // --- Función para actualizar gráfico ---
        function updateMainBarChart(year) {
          const { localidades, valores } = getDataByYear(year);

          const optionBar = {
            title: {
              text: `Transacciones por Localidad (Bogotá) - ${year}`,
              left: "center",
            },
            tooltip: { trigger: "axis" },
            xAxis: {
              type: "category",
              axisLabel: { color: "#333", rotate: 30 },
              axisLine: { lineStyle: { color: "#333" } },
              data: localidades,
            },
            yAxis: {
              type: "value",
              name: "Cantidad",
              nameTextStyle: { color: "#333" },
              axisLabel: { color: "#333" },
              axisLine: { lineStyle: { color: "#333" } },
            },
            series: [
              {
                name: "Transacciones",
                type: "bar",
                data: valores,
                itemStyle: { borderRadius: [5, 5, 0, 0] },
                label: { show: true, position: "top", color: "#333" },
              },
            ],
          };

          mainBarChart.setOption(optionBar, true);
        }

        // --- Inicializar gráfico con año seleccionado ---
        setTimeout(function () {
          const initialYear = document.getElementById(
            "filter-main-bar-year"
          ).value;
          updateMainBarChart(initialYear);
        }, 2000);

        // --- Evento de cambio en el selector ---
        document
          .getElementById("filter-main-bar-year")
          .addEventListener("change", function () {
            updateMainBarChart(this.value);
          });

        // --- Responsive resize for all charts ---
        window.addEventListener("resize", function () {
          lineChart.resize();
          chartRadarMonths.resize();
          chartRadarStrata.resize();
          myChart.resize();
          chartIcons.resize();
          chartTort.resize();
          chartResidencial.resize();
          chartNoResidencial.resize();
          mainBarChart.resize();
        });
      });
    </script>
  </body>
</html>
